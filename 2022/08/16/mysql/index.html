<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha256-xejo6yLi6vGtAjcMIsY8BHdKsLg7QynVlFMzdQgUuy8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"showersheep.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.12.3","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="数据库 MySQLC&#x2F;S架构client 客户端（terminal、cmd、powershell…） 通过命令去访问&#x2F;操作 数据库 server 服务端 MySQL Server mysql的服务端">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql">
<meta property="og:url" content="https://showersheep.github.io/2022/08/16/mysql/index.html">
<meta property="og:site_name" content="ShowerSheep">
<meta property="og:description" content="数据库 MySQLC&#x2F;S架构client 客户端（terminal、cmd、powershell…） 通过命令去访问&#x2F;操作 数据库 server 服务端 MySQL Server mysql的服务端">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815194949201.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815195317230.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815200544743.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815200714252.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815200806627.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815200855408.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815201006920.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815201612126.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815201732459.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815201847796.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815201930125.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815202547999.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815202743165.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815202925103.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815203652288.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816110537002.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816110619217.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816111122841.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816111250491.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816111523507.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816111730723.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816111847622.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816112141439.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816112420832.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816112553078.png">
<meta property="og:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816113032428.png">
<meta property="article:published_time" content="2022-08-16T08:02:59.000Z">
<meta property="article:modified_time" content="2022-08-16T08:16:14.887Z">
<meta property="article:author" content="ShowerSheep">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815194949201.png">


<link rel="canonical" href="https://showersheep.github.io/2022/08/16/mysql/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://showersheep.github.io/2022/08/16/mysql/","path":"2022/08/16/mysql/","title":"mysql"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>mysql | ShowerSheep</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">ShowerSheep</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">3</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">3</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">5</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93-MySQL"><span class="nav-text">数据库 MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#C-x2F-S%E6%9E%B6%E6%9E%84"><span class="nav-text">C&#x2F;S架构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-text">一、数据库的基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-mysql%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2"><span class="nav-text">1.mysql的启动和停止</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-mysql%E8%BF%9E%E6%8E%A5%E4%B8%8E%E5%85%B3%E9%97%AD"><span class="nav-text">2.mysql连接与关闭</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%88%9B%E5%BB%BAdata%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-text">3.创建data文件夹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%98%BE%E7%A4%BA"><span class="nav-text">4.数据库的显示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">5.创建数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">6.删除数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E6%9F%A5%E7%9C%8B%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84SQL"><span class="nav-text">7.查看创建数据库的SQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%AE%9A%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E4%BB%A5%E5%8F%8A%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81"><span class="nav-text">8.创建数据库指定字符编码以及查看数据库的字符编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81"><span class="nav-text">9.修改数据库字符编码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-text">二、表的基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E6%9F%A5%E7%9C%8B%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%A8"><span class="nav-text">1.引用数据库和查看查看数据库中的表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="nav-text">2.创建表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-text">3.查看表的结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="nav-text">4.删除表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="nav-text">5.修改表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="nav-text">三、数据操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-text">1.插入数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-text">2.删除数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="nav-text">3.更新数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%9F%A5%E8%AF%A2%E8%A1%A8%E6%95%B0%E6%8D%AE%EF%BC%88%E5%9F%BA%E6%9C%AC%EF%BC%89"><span class="nav-text">4.查询表数据（基本）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-SQL%E8%AF%AD%E5%8F%A5%E5%8C%BA%E5%88%86"><span class="nav-text">5.SQL语句区分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98"><span class="nav-text">6.字符编码问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-text">四、数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-int%E7%B1%BB%E5%9E%8B"><span class="nav-text">1.int类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%B5%AE%E7%82%B9%E6%95%B0"><span class="nav-text">2.浮点数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%AE%9A%E7%82%B9%E6%95%B0"><span class="nav-text">3.定点数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E6%96%87%E6%9C%AC%E7%B1%BB%E5%9E%8B"><span class="nav-text">4.字符串与文本类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B"><span class="nav-text">5.布尔类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B"><span class="nav-text">6.枚举类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-set%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B"><span class="nav-text">7.set集合类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B"><span class="nav-text">8.时间日期类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E5%88%97%E5%B1%9E%E6%80%A7%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="nav-text">五、列属性完整性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Primary-Key%E4%B8%BB%E9%94%AE%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8F%8A%E4%BC%81%E4%B8%9A%E7%94%A8%E9%80%94"><span class="nav-text">1.Primary Key主键的作用及企业用途</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%BB%84%E5%90%88%E9%94%AE%EF%BC%88%E5%A4%8D%E5%90%88%E4%B8%BB%E9%94%AE%EF%BC%89"><span class="nav-text">2.组合键（复合主键）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-unique%E5%94%AF%E4%B8%80%E5%BB%BA%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-text">3.unique唯一建的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-sql%E5%86%85%E6%B3%A8%E9%87%8A%E5%92%8C%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A"><span class="nav-text">4.sql内注释和代码注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="nav-text">5.数据库完整性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%A4%96%E9%94%AE"><span class="nav-text">6.外键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E7%BD%AE%E7%A9%BA%E5%92%8C%E7%BA%A7%E8%81%94"><span class="nav-text">7.置空和级联</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E6%80%9D%E7%BB%B4"><span class="nav-text">六、数据库设计思维</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">1.数据库设计基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%AE%9E%E4%BD%93%E5%92%8C%E5%AE%9E%E4%BD%93%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="nav-text">2.实体和实体之间的关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Code%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F-%E7%A1%AE%E4%BF%9D%E6%AF%8F%E5%88%97%E5%8E%9F%E5%AD%90%E6%80%A7"><span class="nav-text">3.Code第一范式 确保每列原子性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Code%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F-%E9%9D%9E%E9%94%AE%E5%AD%97%E6%AE%B5%E5%BF%85%E9%A1%BB%E4%BE%9D%E8%B5%96%E9%94%AE%E5%AD%97%E6%AE%B5"><span class="nav-text">4.Code第二范式 非键字段必须依赖键字段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Code%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F-%E6%B6%88%E9%99%A4%E4%BC%A0%E9%80%92%E4%BE%9D%E8%B5%96"><span class="nav-text">5.Code第三范式 消除传递依赖</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-text">七、单表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-select"><span class="nav-text">1.select</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-from"><span class="nav-text">2.from</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-dual"><span class="nav-text">3.dual</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-where"><span class="nav-text">4.where</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-in-x2F-not%E2%80%A6"><span class="nav-text">5.in &#x2F; not…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-between%E2%80%A6and%E2%80%A6-x2F-not%E2%80%A6"><span class="nav-text">6.between…and… &#x2F; not…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-is-null-x2F-not%E2%80%A6"><span class="nav-text">7.is null &#x2F;not…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-text">8.聚合函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-like%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="nav-text">9.like模糊查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-order-by%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="nav-text">10.order by排序查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-group-by-%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="nav-text">11.group by 分组查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-group-concat"><span class="nav-text">12.group_concat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-having"><span class="nav-text">13.having</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-limit"><span class="nav-text">14.limit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-distinct-x2F-all"><span class="nav-text">15.distinct &#x2F; all</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-text">八、多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-union%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="nav-text">1.union联合查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Inner-join"><span class="nav-text">2.Inner join</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-left-join"><span class="nav-text">3.left join</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-right-join"><span class="nav-text">4.right join</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-cross-join"><span class="nav-text">5.cross join</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-natural-join"><span class="nav-text">6.natural join</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E6%97%A0%E5%85%AC%E5%85%B1%E5%90%8C%E5%90%8D%E5%AD%97%E6%AE%B5%E7%9A%84%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5%E8%BF%94%E5%9B%9E%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF"><span class="nav-text">6.无公共同名字段的自然连接返回笛卡尔积</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-using"><span class="nav-text">7.using</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E5%93%AA%E4%B8%80%E4%B8%AA%E8%BF%9E%E6%8E%A5%E5%AE%9E%E7%94%A8%EF%BC%9F"><span class="nav-text">8.哪一个连接实用？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-text">九、子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-text">1.子查询基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-in%E5%92%8Cnot-in"><span class="nav-text">2.in和not in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-exists-%E5%92%8Cnot-exosts"><span class="nav-text">3.exists 和not exosts</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E3%80%81%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86"><span class="nav-text">十、高级部分</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E8%A7%86%E5%9B%BE-1-5"><span class="nav-text">（1）视图 1-5</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E4%BA%8B%E5%8A%A1-6-10"><span class="nav-text">（2）事务 6-10</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E7%B4%A2%E5%BC%95-index-11"><span class="nav-text">（3）索引 index 11</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B-12-13"><span class="nav-text">4.存储过程 12-13</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%9C%89%E8%B6%A3%E7%9A%84%E5%87%BD%E6%95%B0-14-16"><span class="nav-text">5.有趣的函数 14-16</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E4%BC%81%E4%B8%9A%E8%A7%84%E8%8C%83%E7%BA%A6%E6%9D%9F"><span class="nav-text">十一、企业规范约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%BA%93%E8%A1%A8%E5%AD%97%E6%AE%B5%E7%BA%A6%E6%9D%9F%E8%A7%84%E8%8C%83"><span class="nav-text">1.库表字段约束规范</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%B4%A2%E5%BC%95%E8%A7%84%E8%8C%83"><span class="nav-text">2.索引规范</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-SQL%E5%BC%80%E5%8F%91%E7%BA%A6%E6%9D%9F"><span class="nav-text">3.SQL开发约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%85%B6%E4%BB%96%E7%BA%A6%E6%9D%9F"><span class="nav-text">4.其他约束</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ShowerSheep"
      src="/images/avatar.JPG">
  <p class="site-author-name" itemprop="name">ShowerSheep</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ShowerSheep" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ShowerSheep" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:tingyu3366@gmail.com" title="E-Mail → mailto:tingyu3366@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/ShowerSheep" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://showersheep.github.io/2022/08/16/mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="ShowerSheep">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ShowerSheep">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="mysql | ShowerSheep">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          mysql<a href="https://github.com/ShowerSheep/ShowerSheep.github.io/tree/branch-name/subdirectory-name/_posts/mysql.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-08-16 16:02:59 / 修改时间：16:16:14" itemprop="dateCreated datePublished" datetime="2022-08-16T16:02:59+08:00">2022-08-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>14k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>13 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="数据库-MySQL"><a href="#数据库-MySQL" class="headerlink" title="数据库 MySQL"></a>数据库 MySQL</h1><h2 id="C-x2F-S架构"><a href="#C-x2F-S架构" class="headerlink" title="C&#x2F;S架构"></a>C&#x2F;S架构</h2><p>client 客户端（terminal、cmd、powershell…）</p>
<p>通过命令去访问&#x2F;操作 数据库</p>
<p>server 服务端</p>
<p>MySQL Server mysql的服务端</p>
<span id="more"></span>

<h2 id="一、数据库的基本操作"><a href="#一、数据库的基本操作" class="headerlink" title="一、数据库的基本操作"></a>一、数据库的基本操作</h2><h3 id="1-mysql的启动和停止"><a href="#1-mysql的启动和停止" class="headerlink" title="1.mysql的启动和停止"></a>1.mysql的启动和停止</h3><p>1.在服务中启动和停止</p>
<p>2.管理员身份运行terminal</p>
<p>net stop mysql57 停止</p>
<p>net start mysql57 启动</p>
<h3 id="2-mysql连接与关闭"><a href="#2-mysql连接与关闭" class="headerlink" title="2.mysql连接与关闭"></a>2.mysql连接与关闭</h3><p>连接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line">Enter password: 123456 #123456为密码</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p123456</span><br></pre></td></tr></table></figure>

<p>关闭</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br><span class="line">\q</span><br><span class="line">quit</span><br></pre></td></tr></table></figure>



<h3 id="3-创建data文件夹"><a href="#3-创建data文件夹" class="headerlink" title="3.创建data文件夹"></a>3.创建data文件夹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd C:\Program Files\MySQL\MySQL Server 5.7</span><br><span class="line"></span><br><span class="line">mysqld --initialize-insecure --user=root</span><br></pre></td></tr></table></figure>



<h3 id="4-数据库的显示"><a href="#4-数据库的显示" class="headerlink" title="4.数据库的显示"></a>4.数据库的显示</h3><p>显示出所有仓库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815194949201.png" alt="image-20220815194949201"></p>
<h3 id="5-创建数据库"><a href="#5-创建数据库" class="headerlink" title="5.创建数据库"></a>5.创建数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database student; #创建一个student仓库</span><br></pre></td></tr></table></figure>

<p>注意：关键词不能作为数据库名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database `database`; #强制创建</span><br></pre></td></tr></table></figure>

<p>不能创建已经存在的仓库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database if not exists student;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database if not exists `student`;</span><br></pre></td></tr></table></figure>

<h3 id="6-删除数据库"><a href="#6-删除数据库" class="headerlink" title="6.删除数据库"></a>6.删除数据库</h3><p>删除已经存在的仓库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database student;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database if exists `database`;</span><br></pre></td></tr></table></figure>

<p>不存在的数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database if exists student;</span><br></pre></td></tr></table></figure>

<h3 id="7-查看创建数据库的SQL"><a href="#7-查看创建数据库的SQL" class="headerlink" title="7.查看创建数据库的SQL"></a>7.查看创建数据库的SQL</h3><p>查看当初库是怎么创建的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create database student;</span><br></pre></td></tr></table></figure>

<h3 id="8-创建数据库指定字符编码以及查看数据库的字符编码"><a href="#8-创建数据库指定字符编码以及查看数据库的字符编码" class="headerlink" title="8.创建数据库指定字符编码以及查看数据库的字符编码"></a>8.创建数据库指定字符编码以及查看数据库的字符编码</h3><p><strong>实际开发中是utf8，gbk学习使用</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database if not exists `students` charset=gbk; </span><br></pre></td></tr></table></figure>

<h3 id="9-修改数据库字符编码"><a href="#9-修改数据库字符编码" class="headerlink" title="9.修改数据库字符编码"></a>9.修改数据库字符编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter database teacher charset=gbk; #更新数据库</span><br></pre></td></tr></table></figure>



<h2 id="二、表的基本操作"><a href="#二、表的基本操作" class="headerlink" title="二、表的基本操作"></a>二、表的基本操作</h2><h3 id="1-引用数据库和查看查看数据库中的表"><a href="#1-引用数据库和查看查看数据库中的表" class="headerlink" title="1.引用数据库和查看查看数据库中的表"></a>1.引用数据库和查看查看数据库中的表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database if not exists `frank_school` charset=gbk;</span><br></pre></td></tr></table></figure>

<p>指定要操作的仓库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use frank_school;</span><br></pre></td></tr></table></figure>

<p>查看表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<h3 id="2-创建表"><a href="#2-创建表" class="headerlink" title="2.创建表"></a>2.创建表</h3><p>1.普通</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">id int,</span><br><span class="line">name varchar(30),</span><br><span class="line">age int</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>查看表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815195317230.png" alt="image-20220815195317230"></p>
<p>2.B格</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists teacher(</span><br><span class="line">id int auto_increment primary key comment &#x27;主键id&#x27;,</span><br><span class="line">name varchar(30) not null comment &#x27;老师的名字&#x27;,</span><br><span class="line">phone varchar(20) comment &#x27;电话号码&#x27;,</span><br><span class="line">address varchar(100) default &#x27;暂时未知&#x27; comment &#x27;住址&#x27;</span><br><span class="line">)engine=innodb;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815200544743.png" alt="image-20220815200544743"></p>
<blockquote>
<p>id name age 字段<br>auto_increment 自动增长<br>primary key 主键 最主要的 靠它来区分学生这张表 唯一的（一般情况下添加在id后边，不在name加，考虑重名的情况）<br>comment 注释<br>not null 不能为空<br>default 默认值</p>
</blockquote>
<p>查看创建的表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show create table teacher;</span><br><span class="line">show create table student;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815200714252.png" alt="image-20220815200714252"></p>
<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815200806627.png" alt="image-20220815200806627"></p>
<h3 id="3-查看表的结构"><a href="#3-查看表的结构" class="headerlink" title="3.查看表的结构"></a>3.查看表的结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc teacher;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815200855408.png" alt="image-20220815200855408"></p>
<h3 id="4-删除表"><a href="#4-删除表" class="headerlink" title="4.删除表"></a>4.删除表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table student;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists student;</span><br></pre></td></tr></table></figure>

<p>多个一起删除，用逗号隔开</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists student, stu, oooo, jjjj;</span><br></pre></td></tr></table></figure>

<h3 id="5-修改表"><a href="#5-修改表" class="headerlink" title="5.修改表"></a>5.修改表</h3><p>修改表的字符编码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student charset=gbk;</span><br></pre></td></tr></table></figure>

<p>修改之前：</p>
<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815201006920.png" alt="image-20220815201006920"></p>
<p>添加表的字段：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student add phone varchar(20);</span><br></pre></td></tr></table></figure>

<p>在某一字段后添加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student add gender varchar(1) after name;</span><br></pre></td></tr></table></figure>

<p>添加字段放在开头：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student add address varchar(1) first;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815201612126.png" alt="image-20220815201612126"></p>
<p>删除字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student drop address;</span><br></pre></td></tr></table></figure>

<p>修改字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student change phone tel_phone int(11);</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815201732459.png" alt="image-20220815201732459"></p>
<p>只修改字段类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student modify tel_phone varchar(13);</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815201847796.png" alt="image-20220815201847796"></p>
<p>改表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student rename to students;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815201930125.png" alt="image-20220815201930125"></p>
<h2 id="三、数据操作"><a href="#三、数据操作" class="headerlink" title="三、数据操作"></a>三、数据操作</h2><h3 id="1-插入数据"><a href="#1-插入数据" class="headerlink" title="1.插入数据"></a>1.插入数据</h3><p>1.普通插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into teacher (id ,name, phone, address) values(1, &#x27;Frank&#x27;, &#x27;188888888888&#x27;,&#x27;ShangHai&#x27;);</span><br></pre></td></tr></table></figure>

<p>2.“赋值”不一定要按照顺序，必须一一对应，如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into teacher (phone, address, id ,name) values(&#x27;188888889999&#x27;,&#x27;BeiJing&#x27;, 2, &#x27;Jeff&#x27;);</span><br></pre></td></tr></table></figure>

<p>3.简写（按照表顺序）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into teacher values(3, &#x27;Tom&#x27;, &#x27;1000000000&#x27;, &#x27;NanJing&#x27;);</span><br></pre></td></tr></table></figure>



<p>看数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from teacher;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815202547999.png" alt="image-20220815202547999"></p>
<p>4.默认id自增</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into teacher values(NULL, &#x27;Tom&#x27;, NULL, NULL);</span><br></pre></td></tr></table></figure>

<p>结果：teacher创建的时候id自增的，name不能为空</p>
<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815202743165.png" alt="image-20220815202743165"></p>
<p>5.默认值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into teacher values(NULL, &#x27;Jerry&#x27;, NULL, default);</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815202925103.png" alt="image-20220815202925103"></p>
<p>6.一次插入多个数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into teacher values(NULL, &#x27;TOM_1&#x27;, NULL, default),(NULL, &#x27;Jerry_1&#x27;, NULL, default);</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220815203652288.png" alt="image-20220815203652288"></p>
<h3 id="2-删除数据"><a href="#2-删除数据" class="headerlink" title="2.删除数据"></a>2.删除数据</h3><p>对id删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from teacher where id=8;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816110537002.png" alt="image-20220816110537002"></p>
<p>对name删除，会删除所有的name相同的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from teacher where name=&quot;Tom&quot;;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816110619217.png" alt="image-20220816110619217"></p>
<p>对int类型的字段删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from teacher where id&gt;3;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816111122841.png" alt="image-20220816111122841"></p>
<p>表中的数据全部删除（一个一个遍历删除）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from teacher;</span><br></pre></td></tr></table></figure>

<p><strong>清空表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate table student;</span><br></pre></td></tr></table></figure>



<h3 id="3-更新数据"><a href="#3-更新数据" class="headerlink" title="3.更新数据"></a>3.更新数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update teacher set name=&#x27;frank&#x27; where id=1;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816111250491.png" alt="image-20220816111250491"></p>
<p>同理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update teacher set name=&#x27;tom&#x27; where phone=2222;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816111523507.png" alt="image-20220816111523507"></p>
<p>改多个值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update teacher set name=&#x27;tom&#x27;, address=&#x27;ShenZhen&#x27; where phone=2222;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816111730723.png" alt="image-20220816111730723"></p>
<p>如果没有where，所有数据都改了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update teacher set name=&#x27;yang&#x27;;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816111847622.png" alt="image-20220816111847622"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update teacher set address=&#x27;shanghai&#x27; where phone=11111 or phone=2222;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816112141439.png" alt="image-20220816112141439"></p>
<h3 id="4-查询表数据（基本）"><a href="#4-查询表数据（基本）" class="headerlink" title="4.查询表数据（基本）"></a>4.查询表数据（基本）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select id, phone, address from teacher;</span><br></pre></td></tr></table></figure>

<p>用逗号隔开</p>
<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816112420832.png" alt="image-20220816112420832"></p>
<h3 id="5-SQL语句区分"><a href="#5-SQL语句区分" class="headerlink" title="5.SQL语句区分"></a>5.SQL语句区分</h3><p>DDL  data definition language  数据库定义语言 create alter drop show</p>
<p>DML  data manipulation language 数据库操纵语言  insert update delete select</p>
<p>DCL  data control language  数据库控制语言</p>
<h3 id="6-字符编码问题"><a href="#6-字符编码问题" class="headerlink" title="6.字符编码问题"></a>6.字符编码问题</h3><p>查看字符编码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#x27;character_set_%&#x27;;</span><br></pre></td></tr></table></figure>

<p>改字符编码，实际开发中都是utf8</p>
<p>主要是client和results</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set character_set_client=gbk;</span><br></pre></td></tr></table></figure>

<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816112553078.png" alt="image-20220816112553078"></p>
<h2 id="四、数据类型"><a href="#四、数据类型" class="headerlink" title="四、数据类型"></a>四、数据类型</h2><h3 id="1-int类型"><a href="#1-int类型" class="headerlink" title="1.int类型"></a>1.int类型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">id smallint unsigned auto_increment primary key comment &#x27;id&#x27;,</span><br><span class="line">age tinyint unsigned,</span><br><span class="line">kkk int(6)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>(6)：6宽度</p>
<p> <img src="https://typora3366.oss-cn-shenzhen.aliyuncs.com/image-20220816113032428.png" alt="image-20220816113032428"></p>
<h3 id="2-浮点数"><a href="#2-浮点数" class="headerlink" title="2.浮点数"></a>2.浮点数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">number_1 float(3,1),</span><br><span class="line">number_23 double(5,2)</span><br></pre></td></tr></table></figure>

<p>（整数位数，小数位数）</p>
<p>小数位超过时，四舍五入</p>
<p>丢失精度</p>
<h3 id="3-定点数"><a href="#3-定点数" class="headerlink" title="3.定点数"></a>3.定点数</h3><p>decimal </p>
<p>不会丢失精度，支持无符号</p>
<p>钱 用这个</p>
<h3 id="4-字符串与文本类型"><a href="#4-字符串与文本类型" class="headerlink" title="4.字符串与文本类型"></a>4.字符串与文本类型</h3><p>char 不会回收多余的空间  效率高</p>
<p>varchar 回收多余的空间  效率不如char</p>
<h3 id="5-布尔类型"><a href="#5-布尔类型" class="headerlink" title="5.布尔类型"></a>5.布尔类型</h3><h3 id="6-枚举类型"><a href="#6-枚举类型" class="headerlink" title="6.枚举类型"></a>6.枚举类型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gender enum(&#x27;man&#x27;, &#x27;woman&#x27;, &#x27;?&#x27;, &#x27;nothing&#x27;, &#x27;it&#x27;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">insert into t_5 values(&#x27;man&#x27;);</span><br><span class="line">insert into t_5 values(&#x27;?&#x27;);</span><br><span class="line">insert into t_5 values(&#x27;nothing&#x27;);</span><br><span class="line">insert into t_5 values(2); #可以是数字，比较方便</span><br></pre></td></tr></table></figure>

<h3 id="7-set集合类型"><a href="#7-set集合类型" class="headerlink" title="7.set集合类型"></a>7.set集合类型</h3><p>就是取多个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hobby set(&#x27;哲学&#x27;, &#x27;经济学&#x27;, &#x27;文学&#x27;, &#x27;IT&#x27;, &#x27;数学&#x27;, &#x27;MBA&#x27;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into t_6 values(&#x27;IT,经济学&#x27;); #顺序无所谓，显示的时候按照顺序显示</span><br></pre></td></tr></table></figure>

<h3 id="8-时间日期类型"><a href="#8-时间日期类型" class="headerlink" title="8.时间日期类型"></a>8.时间日期类型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">createdTime datetime</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into t_7 values(&#x27;2020-07-28 18:49:33&#x27;);</span><br></pre></td></tr></table></figure>



<h2 id="五、列属性完整性"><a href="#五、列属性完整性" class="headerlink" title="五、列属性完整性"></a>五、列属性完整性</h2><h3 id="1-Primary-Key主键的作用及企业用途"><a href="#1-Primary-Key主键的作用及企业用途" class="headerlink" title="1.Primary Key主键的作用及企业用途"></a>1.Primary Key主键的作用及企业用途</h3><p>绝对唯一，能确定数据存在，不可重复</p>
<p>身份证号：查你身份证号，你的信息全出来了</p>
<p>学号（学校）：食堂、宿舍、电费</p>
<p>对其他的表提供帮助，因为其他的数据也可能会用到这个主键，主键的作用不仅仅局限在这一张表里（其他表里就不是这个主键了）</p>
<p>主键不允许是空值（NULL），除非设置为自增（auto_increment）</p>
<p>添加主键：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table t_8 add primary key (id);</span><br></pre></td></tr></table></figure>

<p>删除主键：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table t_8 drop primary key;</span><br></pre></td></tr></table></figure>

<p>一张表可以有两个主键，用途不广</p>
<h3 id="2-组合键（复合主键）"><a href="#2-组合键（复合主键）" class="headerlink" title="2.组合键（复合主键）"></a>2.组合键（复合主键）</h3><p>某些网站：用户编号、昵称、ID…都是唯一的</p>
<h3 id="3-unique唯一建的作用"><a href="#3-unique唯一建的作用" class="headerlink" title="3.unique唯一建的作用"></a>3.unique唯一建的作用</h3><p>保证数据的唯一</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table t_9(</span><br><span class="line">id int primary key,</span><br><span class="line">phone varchar(20) unique</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into t_9 values(1, &quot;123456&quot;);</span><br><span class="line">insert into t_9 values(2, &quot;123456&quot;);</span><br></pre></td></tr></table></figure>

<p>这样会报错，因为phone重复</p>
<p>添加唯一建：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table t_10 add unique(phone);</span><br></pre></td></tr></table></figure>

<p>删除唯一键：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table t_11 drop index phone;</span><br></pre></td></tr></table></figure>

<h3 id="4-sql内注释和代码注释"><a href="#4-sql内注释和代码注释" class="headerlink" title="4.sql内注释和代码注释"></a>4.sql内注释和代码注释</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table t_12(</span><br><span class="line">id int(20),	# 注释...</span><br><span class="line">name varchar(20) comment &#x27;姓名&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="5-数据库完整性"><a href="#5-数据库完整性" class="headerlink" title="5.数据库完整性"></a>5.数据库完整性</h3><p>实体完整性，域完整性，参照完整性，自定义完整性</p>
<p>设计数据库保证：</p>
<p>字段完整，保证实体的完整性（一张表里应当有主键约束）</p>
<p>有些字段可以为空，有些不能为空；default</p>
<p>可能需要对外部进行引用</p>
<h3 id="6-外键"><a href="#6-外键" class="headerlink" title="6.外键"></a>6.外键</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table stu(</span><br><span class="line">stuID int(4) primary key,</span><br><span class="line">name varchar(20)</span><br><span class="line">); </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table eatery(</span><br><span class="line">id int primary key,</span><br><span class="line">money decimal(10,4),</span><br><span class="line">stuID int(4),</span><br><span class="line">foreign key (stuID) references stu(stuID)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>实际开发中（尤其并发处理）禁止使用外键</p>
<p>后期添加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table eatery_2 add foreign key (stuID) references stu(stuID);</span><br></pre></td></tr></table></figure>

<h3 id="7-置空和级联"><a href="#7-置空和级联" class="headerlink" title="7.置空和级联"></a>7.置空和级联</h3><p>一般情况下，再删除的时候使用置空操作，不使用级联</p>
<p>级联操作会把所有的信息全部改变</p>
<blockquote>
<p>置空操作一般情况下是留给外界进行删除数据的</p>
<p>级联操作一般是留给外界更新数据的</p>
</blockquote>
<p>演示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table stu(</span><br><span class="line">stuID int(4) primary key,</span><br><span class="line">name varchar(20)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table eatery(</span><br><span class="line">id int(20) primary key,</span><br><span class="line">money decimal(10, 4),</span><br><span class="line">stuId int(4),</span><br><span class="line">foreign key(stuId) references stu(stuId) on delete set null on update cascade</span><br><span class="line">    #删除设置置空，更新设置级联</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into stu values(1, &#x27;frank&#x27;);</span><br><span class="line">insert into stu values(2, &#x27;jerry&#x27;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">insert into eatery values(1,20.5,2);</span><br><span class="line">insert into eatery values(2,453.4,1);</span><br><span class="line">insert into eatery values(3,56.3,1);</span><br><span class="line">insert into eatery values(4,11.5,2);</span><br><span class="line">insert into eatery values(5,6.5,1);</span><br></pre></td></tr></table></figure>

<p>级联操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">update stu set stuId=&#x27;4&#x27; where name=&#x27;frank&#x27;;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+-------+-------+</span><br><span class="line">| stuID | name  |</span><br><span class="line">+-------+-------+</span><br><span class="line">|     2 | jerry |</span><br><span class="line">|     4 | frank |</span><br><span class="line">+-------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from eatery;</span><br><span class="line">+----+----------+-------+</span><br><span class="line">| id | money    | stuId |</span><br><span class="line">+----+----------+-------+</span><br><span class="line">|  1 |  20.5000 |     2 |</span><br><span class="line">|  2 | 453.4000 |     4 |</span><br><span class="line">|  3 |  56.3000 |     4 |</span><br><span class="line">|  4 |  11.5000 |     2 |</span><br><span class="line">|  5 |   6.5000 |     4 |</span><br><span class="line">+----+----------+-------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>置空操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">delete from stu where stuId=&#x27;2&#x27;;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from stu;</span><br><span class="line">+-------+-------+</span><br><span class="line">| stuID | name  |</span><br><span class="line">+-------+-------+</span><br><span class="line">|     4 | frank |</span><br><span class="line">+-------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from eatery;</span><br><span class="line">+----+----------+-------+</span><br><span class="line">| id | money    | stuId |</span><br><span class="line">+----+----------+-------+</span><br><span class="line">|  1 |  20.5000 |  NULL |</span><br><span class="line">|  2 | 453.4000 |     4 |</span><br><span class="line">|  3 |  56.3000 |     4 |</span><br><span class="line">|  4 |  11.5000 |  NULL |</span><br><span class="line">|  5 |   6.5000 |     4 |</span><br><span class="line">+----+----------+-------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>



<h2 id="六、数据库设计思维"><a href="#六、数据库设计思维" class="headerlink" title="六、数据库设计思维"></a>六、数据库设计思维</h2><h3 id="1-数据库设计基本概念"><a href="#1-数据库设计基本概念" class="headerlink" title="1.数据库设计基本概念"></a>1.数据库设计基本概念</h3><p>关系？关系型数据库 两张表的共有字段去确定数据的完整性</p>
<p>行？ 一条数据、记录、实体</p>
<p>列？ 一个字段、属性</p>
<p>OOP </p>
<p>数据库冗余（优点：提高性能；缺点：数据太多，不好维护）只能减少，不能避免</p>
<p>数据的完整行</p>
<h3 id="2-实体和实体之间的关系"><a href="#2-实体和实体之间的关系" class="headerlink" title="2.实体和实体之间的关系"></a>2.实体和实体之间的关系</h3><p>一对一</p>
<p>一对多</p>
<p>多对一</p>
<p>多对多</p>
<h3 id="3-Code第一范式-确保每列原子性"><a href="#3-Code第一范式-确保每列原子性" class="headerlink" title="3.Code第一范式 确保每列原子性"></a>3.Code第一范式 确保每列原子性</h3><p>例：</p>
<p>时间段2018-2019，拆分为2018和2019两个</p>
<p>确保字段的原子性（原子不能再分）</p>
<h3 id="4-Code第二范式-非键字段必须依赖键字段"><a href="#4-Code第二范式-非键字段必须依赖键字段" class="headerlink" title="4.Code第二范式 非键字段必须依赖键字段"></a>4.Code第二范式 非键字段必须依赖键字段</h3><p>就是别他妈没事找事</p>
<p>例：student表</p>
<p>学生表里填学生的基本信息，不能说学生有多少钱，花多少钱都放进去</p>
<p>不该有的东西不该有，和student基础信息没关系的全部干掉</p>
<h3 id="5-Code第三范式-消除传递依赖"><a href="#5-Code第三范式-消除传递依赖" class="headerlink" title="5.Code第三范式 消除传递依赖"></a>5.Code第三范式 消除传递依赖</h3><p><strong>根据项目的需求来，没有标准</strong></p>
<p>例：大学成绩</p>
<p>有些情况，查询的时候直接返回语数外总分给字段，没必要设置总分字段，是多余的</p>
<p>（大学没有总分）</p>
<p>高考成绩：肯定要给</p>
<h2 id="七、单表查询"><a href="#七、单表查询" class="headerlink" title="七、单表查询"></a>七、单表查询</h2><h3 id="1-select"><a href="#1-select" class="headerlink" title="1.select"></a>1.select</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select &#x27;去你妈的&#x27;;</span><br><span class="line">+----------+</span><br><span class="line">| 去你妈的 |</span><br><span class="line">+----------+</span><br><span class="line">| 去你妈的 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select 2*7;</span><br><span class="line">+-----+</span><br><span class="line">| 2*7 |</span><br><span class="line">+-----+</span><br><span class="line">|  14 |</span><br><span class="line">+-----+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>#as 取别名,as可以省略</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select &#x27;Go fuck youself&#x27; as qnmd;</span><br><span class="line">+-----------------+</span><br><span class="line">| qnmd            |</span><br><span class="line">+-----------------+</span><br><span class="line">| Go fuck youself |</span><br><span class="line">+-----------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="2-from"><a href="#2-from" class="headerlink" title="2.from"></a>2.from</h3><p>来自哪张表 ，主要使用笛卡尔积</p>
<p>例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">create table t1(</span><br><span class="line">id int(11),</span><br><span class="line">name varchar(20)</span><br><span class="line">);</span><br><span class="line">insert into t1 values(1,&#x27;frank&#x27;);</span><br><span class="line">insert into t1 values(2,&#x27;jerry&#x27;);</span><br><span class="line"></span><br><span class="line">create t2(</span><br><span class="line">score1 int(20),</span><br><span class="line">score2 int(20)</span><br><span class="line">);</span><br><span class="line">insert into t2 values(98,98);</span><br><span class="line">insert into t2 values(933,91);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from t1,t2;</span><br><span class="line">+------+-------+--------+--------+</span><br><span class="line">| id   | name  | score1 | score2 |</span><br><span class="line">+------+-------+--------+--------+</span><br><span class="line">|    1 | frank |     98 |     98 |</span><br><span class="line">|    2 | jerry |     98 |     98 |</span><br><span class="line">|    1 | frank |    933 |     91 |</span><br><span class="line">|    2 | jerry |    933 |     91 |</span><br><span class="line">+------+-------+--------+--------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>



<h3 id="3-dual"><a href="#3-dual" class="headerlink" title="3.dual"></a>3.dual</h3><p>dual 默认伪表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select 2*7 as res from dual;</span><br><span class="line">+-----+</span><br><span class="line">| res |</span><br><span class="line">+-----+</span><br><span class="line">|  14 |</span><br><span class="line">+-----+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="4-where"><a href="#4-where" class="headerlink" title="4.where"></a>4.where</h3><p>条件筛选</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t3 where age &lt;= 18;</span><br></pre></td></tr></table></figure>

<h3 id="5-in-x2F-not…"><a href="#5-in-x2F-not…" class="headerlink" title="5.in &#x2F; not…"></a>5.in &#x2F; not…</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t4 where address in(&#x27;beijing&#x27;,&#x27;shanghai&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="6-between…and…-x2F-not…"><a href="#6-between…and…-x2F-not…" class="headerlink" title="6.between…and… &#x2F; not…"></a>6.between…and… &#x2F; not…</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from t3 where age&gt;=15 and age&lt;=20;</span><br><span class="line">select * from t3 where age between 15 and 20; #包括20和15</span><br></pre></td></tr></table></figure>

<h3 id="7-is-null-x2F-not…"><a href="#7-is-null-x2F-not…" class="headerlink" title="7.is null &#x2F;not…"></a>7.is null &#x2F;not…</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t3 where age is null;</span><br></pre></td></tr></table></figure>

<h3 id="8-聚合函数"><a href="#8-聚合函数" class="headerlink" title="8.聚合函数"></a>8.聚合函数</h3><p>主要是做统计用的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select sum(chinese) from score; #求成绩总和</span><br><span class="line">select avg(chinese) from score; #求成绩平均值</span><br><span class="line">select max(chinese) from score; #求成绩最大值</span><br><span class="line">select min(chinese) from score; #求成绩最小值</span><br><span class="line">select count(chinese) from score; #统计成绩次数</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(*) ...; #不要用，知道就行</span><br></pre></td></tr></table></figure>

<h3 id="9-like模糊查询"><a href="#9-like模糊查询" class="headerlink" title="9.like模糊查询"></a>9.like模糊查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where name like &#x27;张%&#x27;;</span><br></pre></td></tr></table></figure>

<p>%代表一个或多个字符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where name like &#x27;张_&#x27;;</span><br></pre></td></tr></table></figure>

<p>_代表一个字符</p>
<h3 id="10-order-by排序查询"><a href="#10-order-by排序查询" class="headerlink" title="10.order by排序查询"></a>10.order by排序查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from score order by chinese asc;</span><br></pre></td></tr></table></figure>

<p>按照语文成绩排序，升序</p>
<p><strong>desc 降序</strong></p>
<h3 id="11-group-by-分组查询"><a href="#11-group-by-分组查询" class="headerlink" title="11.group by 分组查询"></a>11.group by 分组查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select avg(age) as &#x27;年龄&#x27; , gender &#x27;性别&#x27; from info group by gender;</span><br></pre></td></tr></table></figure>

<p>分别求男和女的平均年龄</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select avg(age) as &#x27;年龄&#x27; , address &#x27;地区&#x27; from info group by address;</span><br></pre></td></tr></table></figure>

<p>分别求北京和上海地区的平均年龄</p>
<h3 id="12-group-concat"><a href="#12-group-concat" class="headerlink" title="12.group_concat"></a>12.group_concat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select group_concat(name), gander from student group by gender;</span><br></pre></td></tr></table></figure>

<p>聚合显示出名字和</p>
<h3 id="13-having"><a href="#13-having" class="headerlink" title="13.having"></a>13.having</h3><p>不是对数据库中的数据进行筛选，而是查询后的结果进行筛选</p>
<p>对查询过后的数据不能用where</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select avg(age) as &#x27;age&#x27;, address as &#x27;address&#x27; from info group by address having age&gt;24;</span><br></pre></td></tr></table></figure>

<p>前半部分是查询出来结果，形成一张虚拟的表，having 后根据形成的虚拟的表在进行查询(where)</p>
<p>注意添加别名（as…）便于筛选</p>
<h3 id="14-limit"><a href="#14-limit" class="headerlink" title="14.limit"></a>14.limit</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from info limit 1,3;</span><br></pre></td></tr></table></figure>

<p>从第二条数据开始往后查三个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from info order by age desc limit 3;</span><br></pre></td></tr></table></figure>

<p>查出这张表中年龄最大的三个人的数据，降序</p>
<h3 id="15-distinct-x2F-all"><a href="#15-distinct-x2F-all" class="headerlink" title="15.distinct &#x2F; all"></a>15.distinct &#x2F; all</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct address from info;</span><br></pre></td></tr></table></figure>

<p>查找去重</p>
<p>默认情况是all，通常忽略</p>
<h2 id="八、多表查询"><a href="#八、多表查询" class="headerlink" title="八、多表查询"></a>八、多表查询</h2><h3 id="1-union联合查询"><a href="#1-union联合查询" class="headerlink" title="1.union联合查询"></a>1.union联合查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select age,gender from info union select &#x27;name&#x27;,phone from teachar;</span><br></pre></td></tr></table></figure>

<p>当两个表两个字段一样的时候，去重</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select age,gender from info union distinct select &#x27;name&#x27;,phone from teachar;</span><br></pre></td></tr></table></figure>

<h3 id="2-Inner-join"><a href="#2-Inner-join" class="headerlink" title="2.Inner join"></a>2.Inner join</h3><p>innor join内连接，有公共字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,score from student innor join score on student.id=score.stuid;</span><br></pre></td></tr></table></figure>

<p>两张表联合起来表示</p>
<h3 id="3-left-join"><a href="#3-left-join" class="headerlink" title="3.left join"></a>3.left join</h3><p>左连接</p>
<p>以左表为基准（谁在左边就以谁为主）</p>
<h3 id="4-right-join"><a href="#4-right-join" class="headerlink" title="4.right join"></a>4.right join</h3><p>右查询</p>
<h3 id="5-cross-join"><a href="#5-cross-join" class="headerlink" title="5.cross join"></a>5.cross join</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t1 cross join t3;</span><br></pre></td></tr></table></figure>

<p>返回笛卡尔积</p>
<h3 id="6-natural-join"><a href="#6-natural-join" class="headerlink" title="6.natural join"></a>6.natural join</h3><p>自然连接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t1 natural join t3;</span><br></pre></td></tr></table></figure>

<p>不用写两边公共的字段名，但是必须是字段名是一样的</p>
<p>默认自然内连接，同理还有自然左连接，自然右连接</p>
<h3 id="6-无公共同名字段的自然连接返回笛卡尔积"><a href="#6-无公共同名字段的自然连接返回笛卡尔积" class="headerlink" title="6.无公共同名字段的自然连接返回笛卡尔积"></a>6.无公共同名字段的自然连接返回笛卡尔积</h3><h3 id="7-using"><a href="#7-using" class="headerlink" title="7.using"></a>7.using</h3><p>当两张表字段都是一样的时候</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t1 inner join t3 using(id);</span><br></pre></td></tr></table></figure>

<p>（跟自然连接的效果是一样的）</p>
<h3 id="8-哪一个连接实用？"><a href="#8-哪一个连接实用？" class="headerlink" title="8.哪一个连接实用？"></a>8.哪一个连接实用？</h3><p>看需求</p>
<h2 id="九、子查询"><a href="#九、子查询" class="headerlink" title="九、子查询"></a>九、子查询</h2><h3 id="1-子查询基本语法"><a href="#1-子查询基本语法" class="headerlink" title="1.子查询基本语法"></a>1.子查询基本语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where id in (select stuid from score where score&gt;=85);</span><br></pre></td></tr></table></figure>

<h3 id="2-in和not-in"><a href="#2-in和not-in" class="headerlink" title="2.in和not in"></a>2.in和not in</h3><h3 id="3-exists-和not-exosts"><a href="#3-exists-和not-exosts" class="headerlink" title="3.exists 和not exosts"></a>3.exists 和not exosts</h3><h2 id="十、高级部分"><a href="#十、高级部分" class="headerlink" title="十、高级部分"></a>十、高级部分</h2><h3 id="（1）视图-1-5"><a href="#（1）视图-1-5" class="headerlink" title="（1）视图 1-5"></a>（1）视图 1-5</h3><h4 id="1-开场"><a href="#1-开场" class="headerlink" title="1.开场"></a>1.开场</h4><p>防止有关人员看到不该看到的内容（某人银行账户有**钱）</p>
<p>刻意（有意）隐藏表的结构</p>
<p>从某种意义上来说降低复杂度</p>
<h4 id="2-view视图创建、使用、作用"><a href="#2-view视图创建、使用、作用" class="headerlink" title="2.view视图创建、使用、作用"></a>2.view视图创建、使用、作用</h4><p>创建视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create view vw_stu as select name,phone from student;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from vw_stu;</span><br></pre></td></tr></table></figure>

<p>下次不用写SQL语句了，直接查看视图就可以看到了</p>
<p>保护隐私</p>
<h4 id="3-显示视图"><a href="#3-显示视图" class="headerlink" title="3.显示视图"></a>3.显示视图</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<p>显示出来有视图，最好带前缀，好区分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc vm_stu;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create vw_stu;</span><br></pre></td></tr></table></figure>

<p>显示出来所有视图的信息（B格）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show table status where comment=&#x27;view&#x27; \G</span><br></pre></td></tr></table></figure>

<h4 id="4-更新和删除视图"><a href="#4-更新和删除视图" class="headerlink" title="4.更新和删除视图"></a>4.更新和删除视图</h4><p>更新：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter view vw_stu_all as select name from student;</span><br></pre></td></tr></table></figure>

<p>删除：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop view vw_stu_all;</span><br></pre></td></tr></table></figure>

<h4 id="5-视图算法temptable-临时表算法-，merge-合并"><a href="#5-视图算法temptable-临时表算法-，merge-合并" class="headerlink" title="5.视图算法temptable(临时表算法)，merge(合并)"></a>5.视图算法temptable(临时表算法)，merge(合并)</h4><p>undefined(未定义的)</p>
<p>创建视图的时候，可以指定视图算法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create algorithm=temptable view vw_stu_all as select name,phone from student;</span><br></pre></td></tr></table></figure>

<h3 id="（2）事务-6-10"><a href="#（2）事务-6-10" class="headerlink" title="（2）事务 6-10"></a>（2）事务 6-10</h3><h4 id="6-事务的提出"><a href="#6-事务的提出" class="headerlink" title="6.事务的提出"></a>6.事务的提出</h4><p>买东西的时候，点击立即购买之后，没付款，问：没付款的钱去哪了？更新到支付宝账户上？还是没更新？</p>
<p>转账的时候有个提示，是否确定</p>
<p>事务：transaction</p>
<h4 id="7-transaction"><a href="#7-transaction" class="headerlink" title="7.transaction"></a>7.transaction</h4><p>开启事务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start transaction;</span><br></pre></td></tr></table></figure>

<p>转账操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update wallet set balance=balance-50 where id=1;</span><br><span class="line">update wallet set balance=balance+50 where id=2;</span><br></pre></td></tr></table></figure>

<p>提交：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">commit;</span><br></pre></td></tr></table></figure>

<p>回滚（退货）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rollback;</span><br></pre></td></tr></table></figure>

<p>只要commit就不能rollback（已经收到货了，不能退款了）</p>
<h4 id="8-rollback-to-回滚点"><a href="#8-rollback-to-回滚点" class="headerlink" title="8.rollback to 回滚点"></a>8.rollback to 回滚点</h4><p>git版本控制&#x2F;虚拟机快照</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">start transaction;</span><br><span class="line">savepoint four;</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">rollback to four;</span><br><span class="line">commit;</span><br></pre></td></tr></table></figure>

<p>four之前的所有数据保留，four后边的都不要了</p>
<h4 id="9-ACID-事务的4大特性"><a href="#9-ACID-事务的4大特性" class="headerlink" title="9.ACID(事务的4大特性)"></a>9.ACID(事务的4大特性)</h4><blockquote>
<p>atomicity 原子性<br>consistency 一致性<br>isolation 隔离性<br>durability 持久性</p>
</blockquote>
<h4 id="10-注意事项"><a href="#10-注意事项" class="headerlink" title="10.注意事项"></a>10.注意事项</h4><p>事务只有在指定数据库引擎为innoDB的时候才能用，并不是都能用</p>
<p>创建数据库的时候可以指定数据库引擎</p>
<h3 id="（3）索引-index-11"><a href="#（3）索引-index-11" class="headerlink" title="（3）索引 index 11"></a>（3）索引 index 11</h3><h4 id="11-索引"><a href="#11-索引" class="headerlink" title="11.索引"></a>11.索引</h4><p>缺点：增删改效率变低（不是一般的低）</p>
<blockquote>
<p>主键索引 primary key<br>唯一键索引<br>普通索引<br>全局索引（搜索引擎使用）、sphinx</p>
</blockquote>
<p>创建索引：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create index balance_index on wallet(balance);</span><br></pre></td></tr></table></figure>

<p>唯一索引：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create unique index balance_index on t2(score1);</span><br></pre></td></tr></table></figure>

<p>删除索引：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop index balance_index on wallet;</span><br></pre></td></tr></table></figure>



<p>数据经常被搜索，经常查（高考总分，无所谓）<br>公共字段<br>如果表里数据非常少，千万不要创建索引<br>性别，不要创建索引</p>
<h3 id="4-存储过程-12-13"><a href="#4-存储过程-12-13" class="headerlink" title="4.存储过程 12-13"></a>4.存储过程 12-13</h3><h4 id="12-delimiter"><a href="#12-delimiter" class="headerlink" title="12.delimiter"></a>12.delimiter</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delimiter //</span><br></pre></td></tr></table></figure>

<p>不在以分好结束，而以&#x2F;&#x2F;结束</p>
<h4 id="13-procedure-存储过程的用途"><a href="#13-procedure-存储过程的用途" class="headerlink" title="13.procedure 存储过程的用途"></a>13.procedure 存储过程的用途</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create procedure proc()</span><br><span class="line">begin</span><br><span class="line">update wallet set balance=balance+50;</span><br><span class="line">update t3 set name=&#x27;tom&#x27;</span><br><span class="line">end//</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delimiter ;</span><br><span class="line">call proc();</span><br></pre></td></tr></table></figure>

<p>删除：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop procedure proc;</span><br></pre></td></tr></table></figure>

<p>查看定义的存储过程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create procedure proc;</span><br></pre></td></tr></table></figure>

<h3 id="5-有趣的函数-14-16"><a href="#5-有趣的函数-14-16" class="headerlink" title="5.有趣的函数 14-16"></a>5.有趣的函数 14-16</h3><h4 id="14-number"><a href="#14-number" class="headerlink" title="14.number"></a>14.number</h4><p>生成一个随机数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select rand();</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select ceil(3.1);	#向上取整</span><br><span class="line">select round(3.1);	#四舍五入</span><br><span class="line">select floor(3.1);	#向下取整</span><br><span class="line">select truncate(3.141592654,2);	#截取数字</span><br></pre></td></tr></table></figure>



<p>选人抽奖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student order by rand() limit 3;</span><br></pre></td></tr></table></figure>

<p>随机排序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student order by rand();</span><br></pre></td></tr></table></figure>

<h4 id="15-string"><a href="#15-string" class="headerlink" title="15.string"></a>15.string</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select ucase (&#x27;abcd!&#x27;);		#转化为大写	ABCD!</span><br><span class="line">select lcase(&#x27;ABC!&#x27;);	#转化为小写	abc!</span><br><span class="line">select left(&#x27;FUCK!&#x27;,2);		#截取字符串	FU</span><br><span class="line">select right(&#x27;FUCK!&#x27;,2);		#截取字符串	K!</span><br><span class="line">select substring(&#x27;FUCK!&#x27;,2,3);		#截取字符串	UCK</span><br><span class="line">select concat(&#x27;FUCK&#x27;,&#x27;agdadaji&#x27;);	#拼接字符串</span><br></pre></td></tr></table></figure>

<p>把name和age分开查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">select concat(name,&#x27;|&#x27;,age) from student;</span><br><span class="line"></span><br><span class="line">mysql&gt; select concat(name,&#x27;|&#x27;,age) from student;</span><br><span class="line">+----------------------+</span><br><span class="line">| concat(name,&#x27;|&#x27;,age) |</span><br><span class="line">+----------------------+</span><br><span class="line">| frank|43             |</span><br><span class="line">| jerry|21             |</span><br><span class="line">| tom|19               |</span><br><span class="line">| connor|18            |</span><br><span class="line">+----------------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="16-others"><a href="#16-others" class="headerlink" title="16.others"></a>16.others</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">select now();	#获取当前的时间</span><br><span class="line"></span><br><span class="line">+---------------------+</span><br><span class="line">| now()               |</span><br><span class="line">+---------------------+</span><br><span class="line">| 2020-09-29 19:52:44 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">select unix_timestamp();	#时间戳</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select year(now()) year, month(now()) month, day(now()) day;</span><br><span class="line"></span><br><span class="line">mysql&gt; select year(now()) year, month(now()) month, day(now()) day;</span><br><span class="line">+------+-------+------+</span><br><span class="line">| year | month | day  |</span><br><span class="line">+------+-------+------+</span><br><span class="line">| 2020 |     9 |   29 |</span><br><span class="line">+------+-------+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>加密函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select sha(&#x27;ajbdabuiabf&#x27;);</span><br><span class="line"></span><br><span class="line">mysql&gt; select sha(&#x27;ajbdabuiabf&#x27;);</span><br><span class="line">+------------------------------------------+</span><br><span class="line">| sha(&#x27;ajbdabuiabf&#x27;)                       |</span><br><span class="line">+------------------------------------------+</span><br><span class="line">| 45e9c6fadd544265b90f997c9844516d8409ad2b |</span><br><span class="line">+------------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="十一、企业规范约束"><a href="#十一、企业规范约束" class="headerlink" title="十一、企业规范约束"></a>十一、企业规范约束</h2><h3 id="1-库表字段约束规范"><a href="#1-库表字段约束规范" class="headerlink" title="1.库表字段约束规范"></a>1.库表字段约束规范</h3><p>是不是VIP 字段：is_vip  类型：unsigned tinyint  长度：1</p>
<p>表名，字段名必须使用小写字母开头，不能数字开头，不能出现大写字母，分割单词必须用 “ _ ” 隔开</p>
<p>在windows下，默认不分大小写，但是在Linux下默认分大小写</p>
<p>表名不能出现复数，“students、teachers…”</p>
<p>索引名一般命名</p>
<blockquote>
<p>pk_xxx	主键<br>uk_xxx	唯一索引<br>idx_xxx	非唯一索引</p>
</blockquote>
<p>凡是有小数的，不允许使用float，double，全部用decimal</p>
<p>如果需要的字符串很小，用char（定长），不要用varchar（varchar是可变长度字符串，不预分配内存空间，不建议超过5000，超过直接定义长文本text类型）</p>
<blockquote>
<p>强制要求，表里必须定义三个字段，缺一不可(id, create_time, update_time)：<br>id 必须为主键primary key，类型为bigint，无符号类型，单表的时候必须设为自增<br>create_time、update_time 强制要求为datatime类型</p>
</blockquote>
<p>定义年龄一般为tinyint，无符号的<br>龟年龄比较长smallint，无符号的</p>
<h3 id="2-索引规范"><a href="#2-索引规范" class="headerlink" title="2.索引规范"></a>2.索引规范</h3><p>业务和流程上有唯一特性的字段，即使他是多的字段的组合，也应该设置一个唯一索引</p>
<p>多表查询，如果join那么数据类型必须一致</p>
<p>多表关联查询，关联查询的字段应该有索引</p>
<p>页面上的搜索不使用左模糊或全模糊</p>
<p>如果varchar建立索引，必须制定长度，没必要在全字段建立索引</p>
<h3 id="3-SQL开发约束"><a href="#3-SQL开发约束" class="headerlink" title="3.SQL开发约束"></a>3.SQL开发约束</h3><p>不要妄想使用count(xxx,xxx,xxx,…)来代替count(*)，不可能，完全不是一个概念，即便把所有的列名都写完，最后发现NULL的没有统计</p>
<p>如果某一列的值全是NULL，注意count</p>
<p>判断是不是空的一定不能用where name&#x3D;NULL;，可以where name is null，一定用isnull()这个函数来判断</p>
<p>不要使用外键和级联，有不代表使用，尤其是在高并发集群的时候</p>
<p>一切外键的问题在应用层解决</p>
<p>实际开发过程中不允许使用存储过程（存储过程很难调试）</p>
<p>在删除和修改的时候要先查，看有没有错误在继续</p>
<p>in的操作能避免就避免</p>
<p>utf8作为国际的编码，不能用GBK</p>
<h3 id="4-其他约束"><a href="#4-其他约束" class="headerlink" title="4.其他约束"></a>4.其他约束</h3><p>ORM框架（spring data jpa）</p>
<p>ORM映射中查询不要使用*作为查询字段返回列表，查询字段必须明确标明</p>
<p>@Transactional 不要使用</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/mysql/" rel="tag"><i class="fa fa-tag"></i> mysql</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/08/13/LAMP%E9%83%A8%E7%BD%B2wordpress%E5%AE%9E%E4%BE%8B01/" rel="prev" title="LAMP部署wordpress实例01">
                  <i class="fa fa-chevron-left"></i> LAMP部署wordpress实例01
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2021 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ShowerSheep</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">42k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">39 分钟</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/4.14.2/algoliasearch-lite.umd.js" integrity="sha256-dImjLPUsG/6p3+i7gVKBiDM8EemJAhQ0VvkRK2pVsQY=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/4.43.1/instantsearch.production.min.js" integrity="sha256-jLNoKrKRDKAOg8JBqkl8jSy2tpqCGQ1/++9QRYtWl8k=" crossorigin="anonymous"></script><script src="/js/third-party/search/algolia-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.8/pdfobject.min.js","integrity":"sha256-tu9j5pBilBQrWSDePOOajCUdz6hWsid/lBNzK4KgEPM="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.3/mermaid.min.js","integrity":"sha256-TIYL00Rhw/8WaoUhYTLX9SKIEFdXxg+yMWSLVUbhiLg="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/pace.js"></script>

  





</body>
</html>
