<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha256-xejo6yLi6vGtAjcMIsY8BHdKsLg7QynVlFMzdQgUuy8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.12.3","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ShowerSheep">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ShowerSheep</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ShowerSheep" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ShowerSheep" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:tingyu3366@gmail.com" title="E-Mail → mailto:tingyu3366@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/09/Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ShowerSheep">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/09/Linux/" class="post-title-link" itemprop="url">Linux</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-08-09 20:03:01 / 修改时间：20:15:00" itemprop="dateCreated datePublished" datetime="2022-08-09T20:03:01+08:00">2022-08-09</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="GNU-Linux"><a href="#GNU-Linux" class="headerlink" title="GNU/Linux"></a>GNU/Linux</h1><h2 id="一、步入Linux世界"><a href="#一、步入Linux世界" class="headerlink" title="一、步入Linux世界"></a>一、步入Linux世界</h2><h3 id="1-Linux内核：操作系统"><a href="#1-Linux内核：操作系统" class="headerlink" title="1.Linux内核：操作系统"></a>1.Linux内核：操作系统</h3><ol>
<li> 硬件设备 管理使用 </li>
<li> 软件程序 （系统）——&gt;操作软件 </li>
<li> 系统内存 </li>
<li> 文件管理：保存文件，删除文件，修改文件 </li>
</ol>
<ul>
<li><ul>
<li> 文件系统：读、写的标准（ext4、FAT32、exFAT、NTFS、APFS…） </li>
<li> Linux查看文件系统： </li>
</ul>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -T</span><br></pre></td></tr></table></figure>

<ol>
<li> GNU是一个组织 </li>
</ol>
<p>​        Unix上具有的一些软件，Linux内核本身没有，所以GNU他们模仿Unix，为Linux写了一些必要的软件</p>
<ol>
<li>GNU核心:<br>原本在Unix<em>上的一些命令和工具，被模仿(移植)到了Linux</em>上。供Linux使用的这套I具:coreutils coreutilities软件包。<br>（1）用来处理文件的工具<br>（2）用来操作文本的工具<br>（3）用来管理进程的工具 </li>
<li>Shell<br>提供给用户使用的软件:用户拿它来使用电脑，并且和电脑交互<br>命令行壳层提供一个命令行界面(CLI) ;而图形壳层提供一个图形用户界面(GUI)<br>Linux shell ——&gt; CLI  COmmand-Line Interface </li>
<li>CLI shell<br>Bash shell 基础shell </li>
<li> GUI </li>
</ol>
<ul>
<li><ul>
<li>X Windows   windows</li>
<li>KDE  windows、macOS</li>
<li>GNOME   manjaro</li>
<li>Unity   Ubuntu</li>
</ul>
</li>
</ul>
<h2 id="二、Bash-shell最基本命令"><a href="#二、Bash-shell最基本命令" class="headerlink" title="二、Bash shell最基本命令"></a>二、Bash shell最基本命令</h2><h3 id="1-CLI命令行"><a href="#1-CLI命令行" class="headerlink" title="1.CLI命令行"></a>1.CLI命令行</h3><p>查看某个命令帮助</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man xx</span><br></pre></td></tr></table></figure>

<p>查命令网址</p>
<p><a target="_blank" rel="noopener" href="https://wangchujiang.com/linux-command/">https://wangchujiang.com/linux-command/</a></p>
<h3 id="2-文件系统"><a href="#2-文件系统" class="headerlink" title="2.文件系统"></a>2.文件系统</h3><p>windows 分盘 CDEF…</p>
<p>C:\software\Devsoft\Git</p>
<p><strong>Linux一切皆为文件</strong></p>
<p>~：用户home目录</p>
<p>/：Linux最根目录</p>
<ul>
<li> /bin 二进制目录 GNU工具 ls等自带的命令 （存放许多用户级） </li>
<li> /etc 系统配置文件 </li>
<li> /home 主目录，存放所有普通用户家目录 </li>
</ul>
<p>/lib 库目录</p>
<p>lost+found 意外文件</p>
<p>/mnt 挂在目录，U盘(挂载 —&gt; 外在设备和电脑进行连接)</p>
<ul>
<li>/proc 伪文件系统（存放虚拟文件，例：进程文件）</li>
</ul>
<p>/run 运行目录</p>
<p>/snap</p>
<p>/tmp 临时目录文件</p>
<ul>
<li> /var 可变目录 log日志文件，存放变化文件 </li>
<li> /boot 启动目录，内核文件 </li>
<li> /dev 设备目录（windows设备管理器） </li>
</ul>
<p>/media 媒体目录</p>
<ul>
<li> /opt 可选目录，空目录 </li>
<li> /root root用户主目录，管理员 </li>
<li> /sbin 系统二进制目录，GNU高级管理员使用的命令工具 </li>
</ul>
<p>/srv 服务目录 本地服务</p>
<ul>
<li>/usr 用户二进制目录，GNU工具（系统文件，C://Windows）</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658484361787-7316efee-6dfe-470e-acc1-f9c8e440a219.png" alt="img"></p>
<p>FHS 文件系统层级标准</p>
<p><a target="_blank" rel="noopener" href="http://www.pathname.com/">www.pathname.com</a></p>
<h3 id="3-cd命令"><a href="#3-cd命令" class="headerlink" title="3.cd命令"></a>3.cd命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd    # 进入用户主目录；</span><br><span class="line">cd /  # 进入根目录</span><br><span class="line">cd ~  # 进入用户主目录；</span><br><span class="line">cd ..  # 返回上级目录（若当前目录为“/“，则执行完后还在“/&quot;；&quot;..&quot;为上级目录的意思）；</span><br><span class="line">cd ../..  # 返回上两级目录；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cd !$  # 把上个命令的参数作为cd参数使用。</span><br><span class="line"></span><br><span class="line">pwd #显示当前目录</span><br></pre></td></tr></table></figure>



<p>组合命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd .. &amp;&amp; ls -alF</span><br></pre></td></tr></table></figure>



<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483188381-43598ee1-fa69-4481-9aa8-e5932d66e489.png" alt="img"></p>
<h3 id="4-文件目录"><a href="#4-文件目录" class="headerlink" title="4.文件目录"></a>4.文件目录</h3><h4 id="1-路径"><a href="#1-路径" class="headerlink" title="1.路径"></a>1.路径</h4><h5 id="（1）-绝对路径（全）"><a href="#（1）-绝对路径（全）" class="headerlink" title="（1）.绝对路径（全）"></a>（1）.绝对路径（全）</h5><p>Windows：盘符:\文件及\文件夹…\文件夹\文件名.后缀名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gedit /home/frank/Documents/doc/1.txt 	#打开文件（macos --&gt; open）</span><br></pre></td></tr></table></figure>

<p>文件不存在时，临时创建一个文件</p>
<h5 id="（2）-相对路径"><a href="#（2）-相对路径" class="headerlink" title="（2）.相对路径"></a>（2）.相对路径</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gedit ./Documents/doc/1.txt</span><br><span class="line">gedit ~/Documents/doc/1.txt</span><br></pre></td></tr></table></figure>

<p>单点符 . 当前文件夹</p>
<p>双点符 .. 当前目录的父目录</p>
<h3 id="5-ls命令："><a href="#5-ls命令：" class="headerlink" title="5.ls命令："></a>5.ls命令：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span>       <span class="comment"># 仅列出当前目录可见文件</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> -l    <span class="comment"># 列出当前目录可见文件详细信息</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> -hl   <span class="comment"># 列出详细信息并以可读大小显示文件大小，增加文件大小单位</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> -al   <span class="comment"># 列出所有文件（包括隐藏）的详细信息</span></span></span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ls -F		#-F区分文件夹和文件</span><br><span class="line">ls Documents/ -F -R	#-R列出内容</span><br><span class="line">ls -FR</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件扩展匹配符</span></span><br><span class="line">ls -l xxx*	#找到xxx开头的文件 </span><br><span class="line">ls -l xxx?	# *代表多个符号，？代表一个符号</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">元字符通配符</span></span><br><span class="line">ls -l f[a-x]ank.txt</span><br><span class="line">ls -l f[!a-x]ank.txt	#取反</span><br></pre></td></tr></table></figure>



<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483220059-443387ae-8a16-4f6b-978e-ba954cc459d8.png" alt="img"></p>
<p>文件扩展匹配符  *  ?</p>
<p>元字符通配符  []</p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483231296-59e7d0b8-631f-4e36-9301-e1baf9bd10a9.png" alt="img"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483244894-70002d25-e0f9-4fe9-bb10-cf499aa9f107.png" alt="img"></p>
<p>扩展：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /opt/ /home/	#同时查看多个目录文件</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /bin | grep ls</span><br></pre></td></tr></table></figure>



<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483261298-db7405a5-b88b-4b08-82f6-4712a3a876af.png" alt="img"></p>
<h3 id="6-touch"><a href="#6-touch" class="headerlink" title="6.touch"></a>6.touch</h3><p><strong>touch命令</strong> 有两个功能：一是用于把已存在文件的时间标签更新为系统当前的时间（默认方式），它们的数据将原封不动地保留下来；二是用来创建新的空文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">touch 2.txt	#创建新的空文件</span><br><span class="line"></span><br><span class="line">touch /opt/test.c /opt/test_1.c</span><br><span class="line">touch /opt/&#123;test.c,test_1.c&#125;</span><br><span class="line"></span><br><span class="line">touch /opt/file&#123;1..100&#125;.txt</span><br><span class="line">touch /opt/test_&#123;a..z&#125;.c</span><br></pre></td></tr></table></figure>

<h3 id="7-cp"><a href="#7-cp" class="headerlink" title="7.cp"></a>7.cp</h3><p>将源文件或目录复制到目标文件或目录中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cp (你想复制的文件) (你想复制到哪)</span><br><span class="line">cp 1.txt 2.txt	#2.txt文件不存在，创建</span><br><span class="line"></span><br><span class="line">cp -i 1.txt 2.txt</span><br><span class="line">-i：覆盖既有文件之前先询问用户；</span><br><span class="line"></span><br><span class="line">cp -r /home/frank/Documents/doc /home/frank/Downloads/</span><br><span class="line"></span><br><span class="line">-R/r：递归处理，将指定目录下的所有文件与子目录一并处理；</span><br><span class="line">-v：详细显示命令执行的操作。</span><br></pre></td></tr></table></figure>



<h3 id="8-ln链接"><a href="#8-ln链接" class="headerlink" title="8.ln链接"></a>8.ln链接</h3><p>符号链接（软链接）<strong>Symbolic link</strong>（soft links）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s 1.java 1_linkfile	#创建软链接（多）</span><br><span class="line">ln 1.java 2_linkfile	#创建硬链接</span><br></pre></td></tr></table></figure>



<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483282075-00adc47a-f466-457a-826d-02745dae3569.png" alt="img"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483291999-1dc8d2fe-a1a2-4d06-8ba6-607ed0efd593.png" alt="img"></p>
<p>cp命令复制后果</p>
<p>复制的是链接文件</p>
<h3 id="9-mv重命名-移动"><a href="#9-mv重命名-移动" class="headerlink" title="9.mv重命名/移动"></a>9.mv重命名/移动</h3><p><strong>移动文件，文件夹</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv 123.c xxx.c	#重命名</span><br><span class="line">mv text.c ~/Document/	#移动文件</span><br></pre></td></tr></table></figure>



<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483302074-6b7fe195-06ed-4f30-8f8d-dd6f2f78c237.png" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd !$</span><br><span class="line">上一条命令的最后一个目录，中间不能有其他命令</span><br></pre></td></tr></table></figure>



<p><strong>注意事项：</strong></p>
<p>mv与cp的结果不同，mv好像文件“搬家”，文件个数并未增加。而cp对文件进行复制，文件个数增加了。</p>
<h3 id="10-rm删除"><a href="#10-rm删除" class="headerlink" title="10.rm删除"></a>10.rm删除</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm xxx.xx</span><br></pre></td></tr></table></figure>



<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483312609-dd1b8964-6c4e-427c-95a0-a40cd6ff1182.png" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /*	#r遍历，f强制</span><br></pre></td></tr></table></figure>

<p><strong>非常危险</strong></p>
<p>使用替代</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -ri dd/</span><br></pre></td></tr></table></figure>

<h3 id="11-mkdir创建文件夹"><a href="#11-mkdir创建文件夹" class="headerlink" title="11.mkdir创建文件夹"></a>11.mkdir创建文件夹</h3><p>创建文件夹 make directories</p>
<p>创建子目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p js/src/util	#递归创建子目录</span><br><span class="line">-v	显示创建过程</span><br><span class="line"></span><br><span class="line">mkdir -pv &#123;a/&#123;c,d/&#123;e,f/&#123;h,i&#125;&#125;&#125;,b/g&#125;		#在当前目录下创建一个a和b的目录．在ａ目录下在创建ｃ和ｄ，在ｄ下创建一个ｅ和ｆ，在ｂ下创建一个ｇ，在ｆ下创建一个ｈ和ｉ</span><br></pre></td></tr></table></figure>



<p>用来删除空目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir #空目录</span><br></pre></td></tr></table></figure>



<h3 id="12-文件类型"><a href="#12-文件类型" class="headerlink" title="12.文件类型"></a>12.文件类型</h3><p>查看文件类型</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">[root@localhost]/home/yang/Documents/Project# </span><span class="language-bash">file 1.txt</span></span><br><span class="line">1.txt: ASCII text</span><br><span class="line"><span class="meta prompt_">[root@localhost]/home/yang/Documents/Project# </span><span class="language-bash"><span class="built_in">cd</span> ..</span></span><br><span class="line"><span class="meta prompt_">[root@localhost]/home/yang/Documents# </span><span class="language-bash">file Project</span></span><br><span class="line">Project: directory</span><br></pre></td></tr></table></figure>



<p>-普通文件（文本文件，二进制文件，压缩文件，电影，图片。。。）<br>d 目录文件（蓝色）<br>b 块设备文件（块设备）存储设备硬盘，U盘 /dev/sda, /dev/sda1<br>c 字符设备文件（字符设备）打印机，终端 /dev/tty1, /dev/zero</p>
<p>l 链接文件（淡蓝色）<br>s 套接字文件<br>p 管道文件</p>
<h3 id="13-cat，more，less，tail，head查看文件内容"><a href="#13-cat，more，less，tail，head查看文件内容" class="headerlink" title="13.cat，more，less，tail，head查看文件内容"></a>13.cat，more，less，tail，head查看文件内容</h3><h4 id="1-cat只适合看短的文件"><a href="#1-cat只适合看短的文件" class="headerlink" title="1.cat只适合看短的文件"></a>1.cat只适合看短的文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat -A 1.txt</span><br><span class="line"></span><br><span class="line">tac xx	#倒看</span><br></pre></td></tr></table></figure>



<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483329150-2e84996b-491e-4566-85cb-6f1d985023db.png" alt="img"></p>
<h4 id="2-more按页展示"><a href="#2-more按页展示" class="headerlink" title="2.more按页展示"></a>2.more按页展示</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more 1.txt</span><br></pre></td></tr></table></figure>



<ul>
<li>按 <code>Space</code> 键：显示文本的下一屏内容。</li>
<li>按 <code>Enter</code> 键：只显示文本的下一行内容。</li>
<li>按斜线符<code>|</code>：接着输入一个模式，可以在文本中寻找下一个相匹配的模式。</li>
<li>按 H 键：显示帮助屏，该屏上有相关的帮助信息。</li>
<li>按 B 键：显示上一屏内容。</li>
<li>按 Q 键：退出more命令。</li>
</ul>
<h4 id="3-less分屏上下翻页浏览文件内容"><a href="#3-less分屏上下翻页浏览文件内容" class="headerlink" title="3.less分屏上下翻页浏览文件内容"></a>3.less分屏上下翻页浏览文件内容</h4><p>用less命令显示文件时，用 PageUp 键向上翻页，用 PageDown 键向下翻页。要退出less程序，应按 Q 键</p>
<h4 id="4-tail和head"><a href="#4-tail和head" class="headerlink" title="4.tail和head"></a>4.tail和head</h4><p>tail显示文件结尾</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tail demo.c	#只显示后面10行</span><br><span class="line">tail -n 2 demo.c	#只显示后面两行</span><br></pre></td></tr></table></figure>

<p>head显示文件开头</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head -3 demo.c	#看前3行</span><br></pre></td></tr></table></figure>

<p>实时看文件内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tailf</span><br><span class="line">tail -f	#当文件被删除后，就算重新创建不能实时查看</span><br><span class="line">tail -F	#能够实时查看文件内容，文件删除重新创建依然能够实时查看</span><br></pre></td></tr></table></figure>

<h2 id="三、更上一层系统上的shell"><a href="#三、更上一层系统上的shell" class="headerlink" title="三、更上一层系统上的shell"></a>三、更上一层系统上的shell</h2><h3 id="1-进程（“任务管理器”）"><a href="#1-进程（“任务管理器”）" class="headerlink" title="1.进程（“任务管理器”）"></a>1.进程（“任务管理器”）</h3><p>system monitor，系统进程</p>
<h4 id="1-静态查看（用于报告当前系统的进程状态）：（PID：医院挂号）"><a href="#1-静态查看（用于报告当前系统的进程状态）：（PID：医院挂号）" class="headerlink" title="1.静态查看（用于报告当前系统的进程状态）：（PID：医院挂号）"></a>1.静态查看（用于报告当前系统的进程状态）：（PID：医院挂号）</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ps</span><br><span class="line">ps axo pid,comm,pcpu # 查看进程的PID、名称以及CPU 占用率</span><br><span class="line">ps -aux | grep named # 查看named进程详细信息</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a 只能查看所有终端进程</span><br><span class="line">u 显示进程拥有者</span><br><span class="line">x 显示系统内所有进程</span><br><span class="line"></span><br><span class="line">-f 显示完整的格式列表</span><br><span class="line">-e显示所有进程</span><br><span class="line">-l长格式显示</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659077662989-93108041-9a9d-40c5-b060-46ec0b6a64d6.png" alt="img"></p>
<p>USER: 运行进程的用户<br>PID： 进程ID<br>%CPU: CPU占用率<br>%MEM: 内存占用率<br>VSZ： 占用虚拟内存<br>RSS: 占用实际内存 驻留内存<br>TTY： 进程运行的终端<br>STAT： 进程状态 man ps (/STATE)<br>R 运行<br>S 可中断睡眠 Sleep<br>T 停止的进程<br>Z 僵尸进程</p>
<p>Ss s进程的领导者，父进程<br>S&lt; &lt;优先级较高的进程<br>SN N优先级较低的进程<br>R+ +表示是前台的进程组</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ps aux --sort %cpu	#按照CPU占用从小到大</span><br><span class="line">ps aux --sort -%cpu #从大到小</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看系统中占用CPU最多的进程</span></span><br><span class="line">ps aux --sort %cpu | tail -1</span><br><span class="line">ps aux --sort -%cpu | head -2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看系统中占用CPU前十</span></span><br><span class="line">ps aux --sort %cpu | tail</span><br><span class="line">ps aux --sort -%cpu | head -11</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 同样的可以查看占用内存</span></span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">mem</span></span><br></pre></td></tr></table></figure>

<p>查看Apache进程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps auxf | grep httpd</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659080185839-14144785-d461-4f4e-a521-123062528c28.png" alt="img"></p>
<p>自定义显示</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps axo user,pid,ppid,%mem,command</span><br></pre></td></tr></table></figure>

<p>指定进程查看相关进程信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps axo user,pid,ppid,%mem,command | grep httpd</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659081280437-8275b6db-ce30-407b-aed2-9df523552a6a.png" alt="img"></p>
<h4 id="2-动态查看（实时动态地查看系统的整体运行情况）："><a href="#2-动态查看（实时动态地查看系统的整体运行情况）：" class="headerlink" title="2.动态查看（实时动态地查看系统的整体运行情况）："></a>2.动态查看（实时动态地查看系统的整体运行情况）：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line">htop</span><br></pre></td></tr></table></figure>



<h4 id="3-网络进程"><a href="#3-网络进程" class="headerlink" title="3.网络进程"></a>3.网络进程</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install net-tools</span><br></pre></td></tr></table></figure>

<p>系统上每一个服务都有自己默认的端口号<br>vnc 5900<br>ssh 22<br>http 80 (nginx apache)<br>https 443<br>mariadb/mysql 3306<br>php 9000<br>redis 6379<br>tomcat (8080 8009 8005)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">netstat -auntpl | grep 22 #过滤22号端口</span><br><span class="line"></span><br><span class="line">-a 所有的进程</span><br><span class="line">-u udp进程</span><br><span class="line">-n 显示段口号  vnc 5900 ftp21、20  ssh 22 http 80 (apache,nginx) https 443   mysql/mariadb  3306  php 9000   redis 6379   tomcat(8009 8080 8005)</span><br><span class="line">-t tcp进程</span><br><span class="line">-p 显示程序的pid 和 名称</span><br><span class="line">-l listening 监听的进程</span><br></pre></td></tr></table></figure>

<p>ss 推荐使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ss -antpl | grep 22</span><br><span class="line"></span><br><span class="line">查看网络进程</span><br><span class="line">-a 所有的进程</span><br><span class="line">-u udp进程</span><br><span class="line">-n 显示段口号 5900 vnc 21、20 ftp</span><br><span class="line">-t tcp进程</span><br><span class="line">-p 显示程序的pid 和 名称</span><br><span class="line">-l listening 监听的</span><br></pre></td></tr></table></figure>







<h3 id="2-kill"><a href="#2-kill" class="headerlink" title="2.kill"></a>2.kill</h3><p>打开记事本，结束记事本进程</p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483348235-2723e5fe-faf6-4240-a624-181ef8a00756.png" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 语法格式</span></span></span><br><span class="line">kill +信号 pid</span><br><span class="line"></span><br><span class="line">kill -9 xx	#强制终止</span><br><span class="line"></span><br><span class="line">-1   HUP  重新加载进程或者重新加载配置文件</span><br><span class="line">-9   KILL 强制杀死</span><br><span class="line">-15  TERM 正常杀死(这个信号可以默认不写)</span><br><span class="line">-18  CONT 激活进程</span><br><span class="line">-19  STOP 挂起进程</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>1信号pid不会改变，但重启服务pid会改变</p>
<p>pkill：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum -y install psmisc</span><br><span class="line"></span><br><span class="line">pkill -9 进程名称</span><br><span class="line">pkill -9 -t 终端 名称</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 不加-9只杀死在终端上运行的进程，加-9连终端本身一起干掉</span></span></span><br></pre></td></tr></table></figure>



<h3 id="3-mount挂载"><a href="#3-mount挂载" class="headerlink" title="3.mount挂载"></a>3.mount挂载</h3><p>同汇编</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo fdisk -l	#显示U盘真实默认路径</span><br><span class="line">sudo mount /dev/sdc1 /mnt/ 	#把原本挂载路径映射到另一个目录，挂载两个目录</span><br><span class="line"></span><br><span class="line">sudo umount /mnt	#卸载，一定要退出默认挂载目录，才能卸载成功</span><br></pre></td></tr></table></figure>

<p>安卓手机挂载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/run/user/1000/gvfs	#MTP协议</span><br></pre></td></tr></table></figure>

<h3 id="4-df-显示磁盘的信息"><a href="#4-df-显示磁盘的信息" class="headerlink" title="4.df 显示磁盘的信息"></a>4.df 显示磁盘的信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df	#显示磁盘的相关信息</span><br><span class="line">df -h	#查看挂载的目录</span><br></pre></td></tr></table></figure>

<p>不能把分区挂载到目录，可以目录挂载到目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du #显示每个文件和目录的磁盘使用空间</span><br></pre></td></tr></table></figure>

<h3 id="5-sort"><a href="#5-sort" class="headerlink" title="5.sort"></a>5.sort</h3><p>对文本文件中所有行进行排序。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sort demo.c	#按每一行第一个字符排，文件没影响，只是展示</span><br><span class="line">sort -n demo.c	#按照数字大小排</span><br></pre></td></tr></table></figure>

<p>其他</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-n, --numeric-sort             根据数字排序。</span><br><span class="line">-r, --reverse                  将结果倒序排列。</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">日志非常有用</span></span><br><span class="line">-M, --month-sort               按照非月份、一月、十二月的顺序排序。</span><br><span class="line"></span><br><span class="line">-k, --key=KEYDEF                       通过一个key排序；KEYDEF给出位置和类型。</span><br></pre></td></tr></table></figure>

<h3 id="6-管道符"><a href="#6-管道符" class="headerlink" title="6. | 管道符"></a>6. | 管道符</h3><p>两个命令合并成一个命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -sh * | sort -nr</span><br></pre></td></tr></table></figure>

<h3 id="7-grep搜索-基础"><a href="#7-grep搜索-基础" class="headerlink" title="7.grep搜索(基础)"></a>7.grep搜索(基础)</h3><p>强大的文本搜索工具</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep &#x27;main&#x27; 1.java	#</span><br><span class="line">grep &#x27;^root&#x27; /etc/passwd	#以root开头</span><br><span class="line">grep &#x27;root$&#x27; /etc/passwd	#以root结尾</span><br></pre></td></tr></table></figure>

<h3 id="8-tar解压缩文件"><a href="#8-tar解压缩文件" class="headerlink" title="8.tar解压缩文件"></a>8.tar解压缩文件</h3><p>压缩只能压缩一个文件</p>
<p>先打包在压缩</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zcvf my_c.tar.gz ./C	#打包后，以 gzip 压缩</span><br></pre></td></tr></table></figure>

<p>将tar包解压缩</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf /opt/soft/test/log.tar.gz</span><br><span class="line"></span><br><span class="line">tar xf 7z2201-linux-x64.tar.xz -C /usr/local/7z2201</span><br></pre></td></tr></table></figure>



<p>7z：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 安装</span></span></span><br><span class="line">yum install p7zip</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 压缩</span></span></span><br><span class="line">7za a  名.7z 被压缩的文件或目录</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#解压</span></span></span><br><span class="line">7za x 压缩包.7z -o 解压目录</span><br><span class="line">7za x 压缩包.7z</span><br></pre></td></tr></table></figure>





<h3 id="9-find文件查找"><a href="#9-find文件查找" class="headerlink" title="9.find文件查找"></a>9.find文件查找</h3><p>按文件名查找</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find /etc -name &quot;ifcfg-eth0&quot;</span><br><span class="line"></span><br><span class="line">-name 区分大小写查找</span><br><span class="line">-iname 不区分大小写查找</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查找</span></span><br><span class="line">find /etc -iname &quot;ifcfg*&quot;</span><br><span class="line">find /etc -iname &quot;*fg*&quot;</span><br></pre></td></tr></table></figure>

<p>按照文件大小查找</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">find /etc -size +5M		#大于5M的</span><br><span class="line">find /etc -size 5M		#等于5M</span><br><span class="line">find /etc -size -5M		#小于5M</span><br><span class="line"></span><br><span class="line">find /etc -size +5M -ls		#查看查到的文件的详细信息</span><br></pre></td></tr></table></figure>

<p>按照时间查找：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find /etc -mtime +5	#修改时间超过5天</span><br><span class="line">find /etc -mtime 5	#修改时间等于5天</span><br><span class="line">find /etc -mtime -5	#修改时间小于5天</span><br></pre></td></tr></table></figure>

<p>stat +文件名    查看文件属性(文件大小，时间)</p>
<p>查找三个时间区别:</p>
<p>Access == atime访问时间</p>
<p>Modify == mtime修改时间</p>
<p>Change == ctime 改变时间</p>
<p>按文件属主、属组找：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">find /home -user jack		#属主是jack的文件</span><br><span class="line">find /home -group hr	#属组是hr组的文件</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">多条件查找（and or）</span></span><br><span class="line">find /home -user jack -group hr			#两者都满足</span><br><span class="line">find /home -user jack -a -group hr	#并且</span><br><span class="line">find /home -user jack -o -group hr	#或者</span><br><span class="line"></span><br><span class="line">find /home -not -user jack	#取反，查找不是jack的文件</span><br><span class="line">find /home ! -user jack</span><br></pre></td></tr></table></figure>

<p>按文件类型：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">find /dev -type f #f普通</span><br><span class="line">find /dev -type d #d目录</span><br><span class="line">l</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">s</span><br><span class="line">p</span><br></pre></td></tr></table></figure>

<p>按文件权限：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查找权限为644的文件</span></span><br><span class="line">find  -perm 644 -ls</span><br></pre></td></tr></table></figure>

<p>按正则表达式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">find /etc -regex &#x27;.*ifcfg-eth[0-9]&#x27;</span><br><span class="line"></span><br><span class="line">.* 任意多个字符</span><br><span class="line">[0-9] 任意一个数字</span><br><span class="line">+ 前面字符一次或者多次</span><br><span class="line">\ 转义符</span><br></pre></td></tr></table></figure>

<p>查找文件动作：</p>
<p>-ls：类似ls -l的形式显示每一个文件的详细</p>
<p>-print: 显示（不加默认）<br>-delete: 将查询到的文件删除</p>
<p>-ok COMMAND {} ; 每一次操作都需要用户确认,{}表示引用找到的文件,是占位符<br>-exec COMMAND {} ; 每次操作无需确认</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./ -name &quot;*.txt&quot; -ok cp  &#123;&#125; /opt \;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659431839034-9bc4a6e2-cc6d-49f4-942a-651446ae90fb.png" alt="img"></p>
<h3 id="10-systemctl启动服务"><a href="#10-systemctl启动服务" class="headerlink" title="10.systemctl启动服务"></a>10.systemctl启动服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl start httpd</span><br><span class="line"></span><br><span class="line">setenforce 0	#临时关闭selinux</span><br><span class="line"></span><br><span class="line">systemctl stop firewalld	#关闭防火墙</span><br></pre></td></tr></table></figure>





<h2 id="四、父子shell"><a href="#四、父子shell" class="headerlink" title="四、父子shell"></a>四、父子shell</h2><h3 id="1-父子shell概念"><a href="#1-父子shell概念" class="headerlink" title="1.父子shell概念"></a>1.父子shell概念</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash</span><br><span class="line">bash</span><br></pre></td></tr></table></figure>



<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658483369380-1f0dffe7-0feb-4f8a-acc2-8f6ea6bbf8e3.png" alt="img"></p>
<h3 id="2-分号在命令中的作用"><a href="#2-分号在命令中的作用" class="headerlink" title="2.分号在命令中的作用"></a>2.分号在命令中的作用</h3><p>依次执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ls ; pwd ; cd /</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进程列表</span></span><br><span class="line">echo $BASH_SUBSHELL	#有没有创建子shell</span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">(ls ; pwd ; cd /)</span><br><span class="line">echo $BASH_SUBSHELL</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>前面没有生成子shell，后面创建子shell然后执行</p>
<h3 id="3-sleep和jobs"><a href="#3-sleep和jobs" class="headerlink" title="3.sleep和jobs"></a>3.sleep和jobs</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sleep 10	#终端睡眠10s</span><br><span class="line">sleep 3&amp;	#放在后台执行执行</span><br><span class="line"></span><br><span class="line">ps -f</span><br><span class="line">jobs	#显示工作状态</span><br><span class="line">jobs -l</span><br></pre></td></tr></table></figure>

<h3 id="4-coproc协程"><a href="#4-coproc协程" class="headerlink" title="4.coproc协程"></a>4.coproc协程</h3><p>挂后台命令</p>
<h3 id="5-外部命令，非外部命令（内建命令）"><a href="#5-外部命令，非外部命令（内建命令）" class="headerlink" title="5.外部命令，非外部命令（内建命令）"></a>5.外部命令，非外部命令（内建命令）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost opt]# type ps	#外部命令</span><br><span class="line">ps is hashed (/usr/bin/ps)</span><br><span class="line">[root@localhost opt]# type cd	#</span><br><span class="line">cd is a shell builtin</span><br></pre></td></tr></table></figure>

<h3 id="6-alias别名"><a href="#6-alias别名" class="headerlink" title="6.alias别名"></a>6.alias别名</h3><p>查看缩写，自己创建一个别名</p>
<p>只能当前用，退出终端不能用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias li=&#x27;ls -li&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="五、环境变量"><a href="#五、环境变量" class="headerlink" title="五、环境变量"></a>五、环境变量</h2><h3 id="1-windows环境变量"><a href="#1-windows环境变量" class="headerlink" title="1.windows环境变量"></a>1.windows环境变量</h3><p>C:\Windows</p>
<p>快速打开软件</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">calc	<span class="comment">#计算器</span></span><br><span class="line"></span><br><span class="line">notepad	<span class="comment">#记事本</span></span><br><span class="line"><span class="comment"># C:\Windows\System32</span></span><br><span class="line"></span><br><span class="line">mspaint	<span class="comment">#画图</span></span><br></pre></td></tr></table></figure>

<h3 id="2-全局变量和局部变量"><a href="#2-全局变量和局部变量" class="headerlink" title="2.全局变量和局部变量"></a>2.全局变量和局部变量</h3><h4 id="1-全局变量"><a href="#1-全局变量" class="headerlink" title="1.全局变量"></a>1.全局变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">printenv	#展示所有的环境变量</span><br><span class="line">printenv USER	#输出当前用户名</span><br><span class="line">printenv HOME #输出家目录</span><br><span class="line">echo $HOME	#</span><br></pre></td></tr></table></figure>

<h4 id="2-局部变量"><a href="#2-局部变量" class="headerlink" title="2.局部变量"></a>2.局部变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set	#查看局部变量</span><br><span class="line"></span><br><span class="line">unset	#删除设置的变量</span><br></pre></td></tr></table></figure>

<h4 id="3-定义用户局部变量"><a href="#3-定义用户局部变量" class="headerlink" title="3.定义用户局部变量"></a>3.定义用户局部变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frank=&quot;123&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658750571853-541e0a52-3aef-45f6-8d38-5f300af19d8a.png" alt="img"></p>
<p>子shell没有作用</p>
<p><strong>自己定义变量一定要小写</strong></p>
<h4 id="4-定义用户全局变量"><a href="#4-定义用户全局变量" class="headerlink" title="4.定义用户全局变量"></a>4.定义用户全局变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export frank=&quot;abcdef&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658750751984-b1fd3c56-6401-42c2-9f6e-4191d8389226.png" alt="img"></p>
<p>终端退出后，失效（参考clash代理设置）</p>
<p>在子shell中删除设置的变量，在父shell中依旧可以使用</p>
<h3 id="3-环境变量"><a href="#3-环境变量" class="headerlink" title="3.环境变量"></a>3.环境变量</h3><p>查看环境变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $PATH</span><br></pre></td></tr></table></figure>

<p>定义环境变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATH=$PATH:/home/yang/project/</span><br></pre></td></tr></table></figure>

<p>退出终端后会失效</p>
<p>看系统环境变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/profile</span><br></pre></td></tr></table></figure>

<p>不同发行版可能bash配置不同</p>
<p>~/.bashrc</p>
<p>~/.bash_profile</p>
<p>~/.profile</p>
<p>~/.bash_login</p>
<h2 id="六、软件包管理"><a href="#六、软件包管理" class="headerlink" title="六、软件包管理"></a>六、软件包管理</h2><h3 id="1-PMS和软件安装"><a href="#1-PMS和软件安装" class="headerlink" title="1.PMS和软件安装"></a>1.PMS和软件安装</h3><p>package management system 包管理系统</p>
<p>软件安装、更新、卸载</p>
<p>工具依赖</p>
<p>dpkg软件包管理系统</p>
<p>dpkg是Debian Package的简写，由Debian发行版开发，用于安装、卸载和供给和deb软件包相关的信息。</p>
<p>使用dpkg的发行版</p>
<p>使用dpkg的发行版主要是Debian以及它的派生版如Ubuntu、Linux Mint等。</p>
<p>apt-get</p>
<p>apt-cache</p>
<p>aptitude    #没人维护，不要使用</p>
<p>RPM软件包管理系统</p>
<p>RPM，全称为Redhat Package Manager，是由Red Hat推出的软件包管理系统，现在在各种发行版中普遍使用。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">apt install sl	#小火车</span><br><span class="line">apt install cmatrix	#装逼命令</span><br><span class="line"></span><br><span class="line">apt update	#检查更新</span><br><span class="line">apt upgrade	#更新</span><br><span class="line"></span><br><span class="line">apt remove xxx	#卸载</span><br></pre></td></tr></table></figure>



<h3 id="2-yum"><a href="#2-yum" class="headerlink" title="2.yum"></a>2.yum</h3><p>换源：阿里镜像站</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">yum clean all	#清除缓存</span><br><span class="line">yum makecache	#新建缓存</span><br><span class="line"></span><br><span class="line">yum repolist	#查询可用仓库</span><br><span class="line"></span><br><span class="line">install	#安装</span><br><span class="line">remove	#卸载</span><br><span class="line">provides	#查询</span><br><span class="line"></span><br><span class="line">update	#更新</span><br><span class="line"></span><br><span class="line">info	#显示包信息</span><br></pre></td></tr></table></figure>



<h3 id="3-自制yum源："><a href="#3-自制yum源：" class="headerlink" title="3.自制yum源："></a>3.自制yum源：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">标签</span><br><span class="line">仓库名</span><br><span class="line">地址</span><br><span class="line">签名</span><br><span class="line">仓库启用</span><br><span class="line">签名key</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659519096989-265fa504-2652-492d-843b-13e2c812d928.png" alt="img"></p>
<p>例：</p>
<p>更改yum配置，可以保存缓存</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">把keepcache改为1</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659529519251-5ef5cbef-823b-4826-9c59-54fa014e4929.png" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># /etc/yum.repos.d/创建my.repo</span></span></span><br><span class="line"></span><br><span class="line">[my]</span><br><span class="line">name=my repo</span><br><span class="line">baseurl=file:///mnt/myyum</span><br><span class="line">rnabled=1</span><br></pre></td></tr></table></figure>

<p>创建目录/mnt/myyum</p>
<p>可以把.rpm软件包放到/mnt/myyum下</p>
<p>使用命令把该目录建成软件包目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">createrepo /mnt/myyum/</span><br><span class="line"></span><br><span class="line">yum clean all	#清除缓存</span><br><span class="line"></span><br><span class="line">yum makecache	#重建缓存</span><br></pre></td></tr></table></figure>

<p>验证仓库是否可用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum repolist</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659529720189-721b339c-816b-4808-9b43-5bff8bf73391.png" alt="img"></p>
<h3 id="4-rpm"><a href="#4-rpm" class="headerlink" title="4.rpm"></a>4.rpm</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh 软件包名称</span><br><span class="line">	-i install</span><br><span class="line">	-vh verbose human	</span><br><span class="line"></span><br><span class="line">rpm -ivh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 查询软件安装路径</span></span></span><br><span class="line">rpm -ql 软件名称</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 查询已安装的软件包</span></span></span><br><span class="line">rpm -qa</span><br><span class="line">rpm -qa | grep nginx	#判断软件包是否安装</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 查询软件详细信息</span></span></span><br><span class="line">rpm -qi 软件名称</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 查询某一个文件是由哪个软件产生的</span></span></span><br><span class="line">rpm -qf /etc/passwd</span><br><span class="line">rpm -qf /bin/rpm</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 软件卸载</span></span></span><br><span class="line">rpm -e 软件名称</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 软件卸载</span></span></span><br><span class="line">rpm -qc  软件名称</span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 了解</span></span></span><br><span class="line">--force  在安装的时候用(强制安装)</span><br><span class="line">--nodeps 在卸载的时候用(卸载的时候不检查依赖关系)</span><br></pre></td></tr></table></figure>







<h2 id="七、用户和权限"><a href="#七、用户和权限" class="headerlink" title="七、用户和权限"></a>七、用户和权限</h2><h3 id="1-创建、删除、更改用户"><a href="#1-创建、删除、更改用户" class="headerlink" title="1.创建、删除、更改用户"></a>1.创建、删除、更改用户</h3><p>创建用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">useradd t1	#创建一个名为t1的用户</span><br><span class="line">useradd -d /user1 user1	#创建一个用户名为user2并指定用户的uid为2000</span><br><span class="line">useradd -u 2000 user2	#创建一个用户名为user2并指定用户的uid为2000</span><br><span class="line">useradd -g 2000 user4	#创建一个用户名为user4并指定用户的gid为2000</span><br><span class="line">useradd -c &quot;this is ceshi&quot; user6	#创建一个用户名为user6并为该用户设定描述内容为this is ceshi</span><br><span class="line">useradd -s /sbin/nologin user7	#创建一个用户名为user7并设定该用户不允许登录</span><br><span class="line">useradd -M user8	#创建一个用户名为user8并不创建家目录</span><br><span class="line"></span><br><span class="line">-d 指定家目录（自定义家目录）</span><br><span class="line">-u 指定uid</span><br><span class="line">-g 指定gid</span><br><span class="line">-c 指定描述</span><br><span class="line">-s 指定登录shell</span><br><span class="line">-M 不创建家目录</span><br></pre></td></tr></table></figure>

<p>修改用户信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">usermod -l frank user2	#修改用户user2改名为frank</span><br><span class="line">usermod  -u 3000 user3	#修改用户user3的uid为3000</span><br><span class="line">usermod -g 2002 user4	#修改用户user4的gid为2002</span><br><span class="line">usermod  -c &quot;this is hello&quot;  user6	#修改用户user6的描述为“this is hello”</span><br><span class="line">usermod -d /user7 user7	#修改用户user7的家目录为/user7</span><br><span class="line">usermod  -s /sbin/nologin user8	#将user8设定为不允许登录</span><br></pre></td></tr></table></figure>

<p>改用户密码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">passwd	#默认改root账户密码</span><br><span class="line">passwd user1	#修改用户user1密码</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">非交互式设置密码</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">给diandiange这个用户设定密码为123</span></span><br><span class="line">echo &quot;123&quot;  | passwd --stdin user1</span><br><span class="line">echo &quot;123456&quot;  | passwd --stdin root</span><br></pre></td></tr></table></figure>

<p>先创建用户密码对应文件，格式为username:password，如abc:abc123，必须以这种格式来书写，并且不能有空行，保存成文本文件user.txt，然后执行chpasswd命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chpasswd &lt; user.txt</span><br></pre></td></tr></table></figure>

<p>删除用户：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userdel zhangsan	#删除不彻底（家目录，邮件文件会保留）</span><br><span class="line"></span><br><span class="line">userdel -r zhangsan   #彻底删除</span><br></pre></td></tr></table></figure>

<p>用户切换：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - user1</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>uid如果我们不指定，默认根据上一个用户uid的值+1</p>
<p>默认情况下，创建的普通用户是可以登录的（/bin/bash）</p>
<p>不允许登录（/sbin/nologin）</p>
<p>在系统中有很多可以登录的shell，除了/bin/bash以外，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/shells</span><br><span class="line"></span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/sbin/nologin	#（不可以登录）</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">/usr/sbin/nologin	#（不可以登录）</span><br></pre></td></tr></table></figure>

<p>Ubuntu20.04 系统用户 UID&lt;500</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yang:x:1002:1002::/home/yang:/bin/bash</span><br><span class="line"></span><br><span class="line">用户名:密码:UID:GID（组ID）:描述:用户home目录:用户默认登录的shell</span><br></pre></td></tr></table></figure>

<p>更改/etc/passwd</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/shadow	#</span><br></pre></td></tr></table></figure>

<h3 id="2-组groups"><a href="#2-组groups" class="headerlink" title="2.组groups"></a>2.组groups</h3><p>小组目的：共享资源的权限</p>
<p>不同发行版略有差异</p>
<p>查看组：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/group	#查看组</span><br></pre></td></tr></table></figure>

<p>基本使用：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建组：</span></span><br><span class="line"></span><br><span class="line">groupadd hr	#创建hr组</span><br><span class="line">groupadd -g 4000 cw	#创建一个gid为4000的组</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改组：</span></span><br><span class="line"></span><br><span class="line">groupmod -g 6000 cw	#修改组的gid</span><br><span class="line">groupmod -n abc cw	#修改组名为abc，先新在旧</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在组中添加用户：</span></span><br><span class="line"></span><br><span class="line">usermod  -aG hr user1	#给用户user1添加附加组</span><br><span class="line">gpasswd -a user1 hr	#给hr这个组添加user1的用户</span><br><span class="line"></span><br><span class="line">gpasswd -M user1,user2 hr</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将user1从hr组中删除</span></span><br><span class="line">gpasswd -d user1 hr	</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除组</span></span><br><span class="line">groupdel hr</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将用户添加到轮子组，添加到轮子组的用就具备了管理员的权限，可以执行管理员的命令</span></span><br><span class="line">gpasswd -a user1 wheel</span><br></pre></td></tr></table></figure>

<p>用户提权：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.将用户加入到轮子组</span></span><br><span class="line">gpasswd -a qf01 wheel</span><br><span class="line">usermod -aG wheel qf01</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.改文件</span></span><br><span class="line">vim sudo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Allow root to run any commands anywhere</span></span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">user1 ALL=(ALL)     ALL（添加）</span><br></pre></td></tr></table></figure>



<h3 id="3-文件权限"><a href="#3-文件权限" class="headerlink" title="3.文件权限"></a>3.文件权限</h3><p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658840595589-5d7d982f-80b1-4b26-9645-30dd2adfbadb.png" alt="img"></p>
<p>rwxr-xr-x</p>
<p>rwx 组创始人权限（文件所有者权限）</p>
<p>r-x 组下属成员权限（文件所属组权限）</p>
<p>r-x 其他组成员权限（其他用户权限）</p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658841415925-662effbf-68d8-40b4-b260-a6e8158160c2.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-chmod.html">https://www.runoob.com/linux/linux-comm-chmod.html</a></p>
<p>修改文件所有者和组</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">chown user1 demo.c	#只修改所有者</span><br><span class="line"></span><br><span class="line">chown user1. demo.c	#修改所有者和所属组都为user1</span><br><span class="line"></span><br><span class="line">chown .group1 demo.c	#修改文件所属组</span><br><span class="line"></span><br><span class="line">chown user1.group1 demo.c	#修改所有者为user1，所属组为group1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改目录</span></span><br><span class="line"></span><br><span class="line">chown user1.group1 project -R	#对project目录及目录下所有文件修改</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">区别</span></span><br><span class="line">chown user1.group1 project/*	#仅对project目录下所有文件修改，不修改目录本身</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">project下有目录也有文件</span></span><br><span class="line">chown user1.group1 project/* -R</span><br></pre></td></tr></table></figure>

<p>设置文件的权限</p>
<p>r：读    4</p>
<p>w：写    2</p>
<p>x：执行    1</p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658902082336-66bc81c2-7969-41f4-86f5-3beffeb61fb3.png" alt="img"></p>
<p>修改权限(+，=，-)：</p>
<p>参数：u/g/o     rwx</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">+ 在原有的基础上增加</span></span><br><span class="line">chmod o+wx 1.c</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658902525851-955ad2bd-35dc-461f-b8a4-ea8b44f68586.png" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">直接赋值权限</span></span><br><span class="line">chmod g=wx 1.c</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658902658704-78f0a9f4-e491-41fc-871e-76b3ffbd7b7f.png" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">给2.c所有人减少读权限</span></span><br><span class="line">chmod a-r 2.c</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">给2.c所有人加可执行权限</span></span><br><span class="line">chmod a+x 2.c</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1658903154385-3be364df-870d-43d6-9b10-aa596e517451.png" alt="img"></p>
<p>将文件 file1.txt 与 file2.txt 设为该文件拥有者，与其所属同一个群体者可写入，但其他以外的人则不可写入 :</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod ug+w,o-w file1.txt file2.txt</span><br></pre></td></tr></table></figure>

<p>使用数字方式</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chomd 777 file #所有人所有权限</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">同<span class="built_in">chown</span></span></span><br><span class="line">chmod 777 project/*	#不包含目录</span><br><span class="line">chmod 777 project/* -R	#包含目录</span><br></pre></td></tr></table></figure>

<p>文件的默认权限：644</p>
<p>目录的默认权限：755</p>
<h3 id="4-服务器忘记密码"><a href="#4-服务器忘记密码" class="headerlink" title="4.服务器忘记密码"></a>4.服务器忘记密码</h3><p>1.服务器关机重启</p>
<p>2.按e进救援模式</p>
<p>3.找到UTF-8，后面输入：rd.break console=tty0</p>
<p>在救援模式下</p>
<p>4.Ctrl + X</p>
<p>5.需要将/sysroot重新挂载为可读可写：mount -o rw,remount /sysroot</p>
<p>6.切换到临时根目录下：chroot /sysroot</p>
<p>修改密码：passwd</p>
<p>7.关闭selinux目的是修改的密码生效</p>
<p>vi /etc/selinux/config，编辑上面的文件 然后将selinux=的内容改为disabled</p>
<p>8.因为对文件的修改，为了确保开机时重新设定 SELinux ，必须在根目录下添加隐藏文件 .autorelabel<br>    touch /.autorelabel<br>    exit<br>    reboot</p>
<h3 id="5-高级权限"><a href="#5-高级权限" class="headerlink" title="5.高级权限"></a>5.高级权限</h3><p>添加权限命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod u+s file	给文件增加suid权限</span><br><span class="line">chmod g+s dir	使文件拥有组继承权限</span><br><span class="line">chmod o+t dir	文件所有者才能删除文件（root可以）</span><br></pre></td></tr></table></figure>



<p>suid 普通用户通过suid提权 &lt;针对文件&gt;</p>
<p>给一个二进制文件设置suid权限</p>
<p>比如普通用户没有权限查看/etc/shadow文件</p>
<p>所以把cat命令提权，普通用户也会享有提权后的cat命令权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">a:字母的方式</span></span><br><span class="line">chmod u+s /bin/cat</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">b:数字的方式</span></span><br><span class="line">chmod 4777 /bin/cat</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除suid权限：</span></span><br><span class="line">chmod u-s /bin/cat</span><br></pre></td></tr></table></figure>

<p>之后普通用户可以使用提权后的cat查看/etc/shadow文件</p>
<p>注意：</p>
<p>suid只能给命令添加，当给命令添加了suid之后，后面再有人去执行这个命令的时候就会拥有命令操作符所有者的权限</p>
<p>sticky：用户只能删除自己的文件 &lt;针对目录&gt;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod o+t /home/dir1</span><br></pre></td></tr></table></figure>

<p>谁可以删除：<br>root<br>文件的所有者<br>目录的所有者</p>
<p>sgid 新建文件继承目录属组 &lt;针对目录&gt;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod g+s /home/hr</span><br></pre></td></tr></table></figure>



<h3 id="6-隐藏权限"><a href="#6-隐藏权限" class="headerlink" title="6.隐藏权限"></a>6.隐藏权限</h3><p>用来限制root</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加隐藏权限</span></span><br><span class="line">chattr +a 文件	#允许往文件里追加内容</span><br><span class="line"></span><br><span class="line">chattr +i 文件	#只能看，其他的都不能</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看隐藏权限</span></span><br><span class="line">lsattr file</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除隐藏权限</span></span><br><span class="line">chattr -a file</span><br><span class="line">chattr -i file</span><br></pre></td></tr></table></figure>

<h3 id="7-umask权限掩码"><a href="#7-umask权限掩码" class="headerlink" title="7.umask权限掩码"></a>7.umask权限掩码</h3><p>创建一个文件默认权限是644  默认的umask 022</p>
<p>创建一个目录默认权限是755</p>
<p>文件：666</p>
<p>目录：777</p>
<p>例：</p>
<p>umask 234</p>
<p>文件：666</p>
<p>根据umask为234，计算创建文件的权限是多少</p>
<p>666 rw- rw- rw- 110 110 110             110 110 110</p>
<p>234 -w- -wx r–  010 011 100  取反      101 100 011</p>
<p>​                                    100 100 010  r– r– -w-   442</p>
<h2 id="八、vim"><a href="#八、vim" class="headerlink" title="八、vim"></a>八、vim</h2><h3 id="1-vim使用"><a href="#1-vim使用" class="headerlink" title="1.vim使用"></a>1.vim使用</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">三种工作模式：</span><br><span class="line">命令模式</span><br><span class="line">插入模式/编辑模式</span><br><span class="line">尾行模式/扩展命令模式</span><br><span class="line">注意：</span><br><span class="line">在任意一个模式下，只要对文件进行编辑和修改，不允许使用鼠标进行移动</span><br><span class="line">命令模式：</span><br><span class="line">使用上下左右键移动光标</span><br><span class="line">想在那个位置进行修改，就把光标移动到那个位置</span><br><span class="line"></span><br><span class="line">把光标移动到行首：快捷键HOME 0</span><br><span class="line">把光标移动到行尾：快捷键END $</span><br><span class="line">把光标从任意一个位置移动到最后一行：G</span><br><span class="line">把光标从任意一个位置移动到第一行：gg</span><br><span class="line">把光标直接移动到第3行：3gg</span><br><span class="line"></span><br><span class="line">文件编辑快捷键（只局限于在一个文件内部使用）</span><br><span class="line">复制光标所在行：yy</span><br><span class="line">复制光标所在行及以下三行：4yy</span><br><span class="line">粘贴：p</span><br><span class="line">删除某一行：dd 删除光标所在行</span><br><span class="line">删除多行：2dd</span><br><span class="line">文件中所有内容删除：dG  删除光标所在行到最后一行</span><br><span class="line">因为光标在第一行，所有dG可以删除文件所有内容</span><br><span class="line">撤销：误删除了 u</span><br><span class="line">删除单个字符：x</span><br><span class="line">删除光标所在位置到行尾的所有内容：D</span><br><span class="line">字符的替换：r 选中要替换的字符，然后使用r,输入替换后的字符</span><br><span class="line"></span><br><span class="line">在我们编辑一个文件的时候，使用那个快捷键能加快工作效率，我们就使用那个</span><br><span class="line"></span><br><span class="line">在命令模式下进入插入模式快捷键：（6个）</span><br><span class="line">i（最常用的）</span><br><span class="line">I：进入插入模式并且光标移动到所在行的行首</span><br><span class="line">A：进入插入模式并且光标移动到行在行的行尾</span><br><span class="line">a：进入插入模式并且光标移动到下一个字符</span><br><span class="line">O：进入插入模式并且光标移动到了上一行</span><br><span class="line">o：进入插入模式并且光标移动到了下一行</span><br><span class="line"></span><br><span class="line">尾行模式：</span><br><span class="line">从命令模式进入到尾行模式</span><br><span class="line">现在在插入模式，进入尾行模式，先进入命令模式</span><br><span class="line">:(冒号 英文状态下的冒号 )命令--&gt;尾行</span><br><span class="line">w保存</span><br><span class="line">q退出</span><br><span class="line">wq 保存并退出（最常用的快捷键）</span><br><span class="line">！强制</span><br><span class="line">当正常无法保存退出时；</span><br><span class="line">wq!  强制保存并退出</span><br><span class="line">只能执行强制退出</span><br><span class="line">q!</span><br></pre></td></tr></table></figure>





<p>emacs    神之编辑器</p>
<p>vim    编辑器之神</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install vim	#Ubuntu</span><br><span class="line">yum -y install vim	#CentOS</span><br></pre></td></tr></table></figure>



<p>普通模式（命令操作模式）：操作文件</p>
<p>插入模式：编辑（只有插入的时候才是插入模式）</p>
<p>键：H左    J下    K上    L右</p>
<p>翻页：Ctrl+F：向下一页    Ctrl+B：向上一页</p>
<p>滚动翻页：Ctrl+E：向下        Ctrl+Y：向上</p>
<p>dw：移除当前所在光标往后的单词</p>
<p>d：跳跃单词首字母</p>
<p>e：跳跃单词最后</p>
<p>w：跳跃到下一个单词首字母</p>
<p>shift+6    ^    跳跃到本行开头</p>
<p>shift+4    $    跳跃到本行末尾</p>
<p>在普通模式不能使用backspace和delete键</p>
<p>{    }    跳跃{ }大括号</p>
<p>dd：删除（剪切，p可以粘贴）</p>
<p>yw：复制一个单词</p>
<p>y$：从当前开始，复制到行末</p>
<p>p：粘贴</p>
<p>可视化模式：</p>
<p>选择文本 v 进行选择</p>
<p>V 行</p>
<p>全选：V G    d删除，y 复制，</p>
<p>0：补全角落</p>
<p>vaw：快速选择单词</p>
<p>vab：带括号选择单词    ( )    小括号</p>
<p>vaB：    {    }    大括号</p>
<p>va&lt;：    &lt;    &gt;    尖括号</p>
<p>代码缩进：</p>
<p>v &lt;、&gt;    左、右缩进（注意shift键）</p>
<p>v选择，shift + ~ ：字母大小写切换</p>
<p>v + u：全部转化为小写</p>
<p>v + U：大写 </p>
<p>查找：按 / 输入要查找内容，/123，按 n 跳下一个</p>
<p>替换：:s/const/let/g    g一行</p>
<p>:%s/const/let/g    全局</p>
<p>:9,15/const/let/g    9-15行</p>
<p>:%s/const/let/gc    有提示，按 y 确认</p>
<h3 id="2-vim基本配置"><a href="#2-vim基本配置" class="headerlink" title="2.vim基本配置"></a>2.vim基本配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim .vimrc</span><br><span class="line"></span><br><span class="line">set syntax=on	#设置高亮</span><br><span class="line">set tabstop=4</span><br><span class="line">set softtabstop=4</span><br><span class="line">set number	#行号</span><br><span class="line">set enc=utf-8</span><br><span class="line">set showmatch	#括号</span><br></pre></td></tr></table></figure>

<p>阮一峰Vim 配置入门：</p>
<p><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2018/09/vimrc.html">https://www.ruanyifeng.com/blog/2018/09/vimrc.html</a></p>
<h2 id="九、管道和重定向"><a href="#九、管道和重定向" class="headerlink" title="九、管道和重定向"></a>九、管道和重定向</h2><h3 id="1-重定向"><a href="#1-重定向" class="headerlink" title="1.重定向"></a>1.重定向</h3><p>文件描述符 0 与 进程的标准输入（standard input）<br>文件描述符 1 与 标准输出（standard output）<br>文件描述符 2 与 标准错误（standard error）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls /proc/$$/fd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  $$ 当前终端的pid</span></span><br></pre></td></tr></table></figure>

<p>输出重定向 (覆盖，追加)<br>正确输出： 1&gt; 1&gt;&gt; 等价于 &gt; &gt;&gt;<br>错误输出： 2&gt; 2&gt;&gt;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">date 1&gt; date.txt	#输出重定向（覆盖）日期时间</span><br><span class="line"></span><br><span class="line">date &gt;&gt; date.txt	#输出重定向（追加）</span><br><span class="line">ls /home/ /aaaaaaaaa &gt;list.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659339756949-d48213fc-8e76-4f39-8564-b6a11acef33f.png" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 错误输出重定向</span></span></span><br><span class="line">ls /home/ /aaaaaaaaa &gt;list.txt 2&gt;error.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659339817765-aee84e34-1848-4d11-a585-9159f89f5910.png" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 正确和错误都输入到相同位置</span></span></span><br><span class="line">ls /home/ /aaaaaaaaa &amp;&gt;list.txt</span><br><span class="line"></span><br><span class="line">ls /home/ /aaaaaaaaa &gt;list.txt 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659339863746-aab014f8-b209-43ae-87d7-0b9b70c4a650.png" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls /home/ /aaaaaaaaa &amp;&gt;/dev/null</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">返回值扔到回收站</span></span><br></pre></td></tr></table></figure>







<h3 id="2-管道"><a href="#2-管道" class="headerlink" title="2.管道"></a>2.管道</h3><p>对字段进行排序：</p>
<p>b.txt中有123456789</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 对字段进行排序</span></span></span><br><span class="line">sort -rn b.txt</span><br><span class="line"></span><br><span class="line">-n 按数值，默认按字符排序</span><br><span class="line">-r 逆序</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659408043885-c15a0b95-8132-47ad-8d88-80ebc4b6d16b.png" alt="img"></p>
<p>uniq去重：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uniq -c b.txt</span><br></pre></td></tr></table></figure>



<p>awk打印指定的字段：</p>
<p>过滤xx列</p>
<p>统计当前/etc/passwd中用户使用的shell类型</p>
<p>思路：取出第七列（shell） | 排序（把相同归类）| 去重</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;&#123;print $7&#125;&#x27; /etc/passwd</span><br><span class="line">awk -F: &#x27;&#123;print $7&#125;&#x27; /etc/passwd |sort</span><br><span class="line">awk -F: &#x27;&#123;print $7&#125;&#x27; /etc/passwd |sort |uniq</span><br><span class="line">awk -F: &#x27;&#123;print $NF&#125;&#x27; /etc/passwd |sort |uniq -c</span><br><span class="line"></span><br><span class="line">-F: 指定字段分隔符,默认以空格或者是tab分隔</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">7 第七个字段</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">NF表示最后一个字段</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(NF-1)表示倒数第二个字段</span></span><br><span class="line">NR(NR==2 第二行)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 以/为分隔符，打印第一列</span></span></span><br><span class="line">awk -F &quot;/&quot; &#x27;&#123;print $1&#125;&#x27;</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wc -l			#统计多少行</span><br><span class="line"></span><br><span class="line">cat /etc/passwd | wc -l	#统计系统多少用户，passwd多少行</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659408406084-d6937e62-19bb-4389-93aa-5710a094000a.png" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat access_log | awk &#x27;&#123;print $1&#125;&#x27; | sort |uniq |wc -l</span><br><span class="line">看日志					|		过滤第一列				|	排序 |去重 |	多少列</span><br></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat access_log | wc -l	#统计网站一共被访问多少次</span><br><span class="line">cat access_log | awk &#x27;&#123;print $1&#125;&#x27; |sort | uniq | wc -l	#统计有多少人访问</span><br><span class="line">cat access_log | awk &#x27;&#123;print $1&#125;&#x27; | sort | uniq -c	#统计每个人访问次数</span><br><span class="line">cat access_log | awk &#x27;&#123;print $1&#125;&#x27; | sort | uniq -c | sort -rn | head	#统计访问量前十</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659423646521-35fd5d84-5d6f-43bb-8577-11ccbdf97ef2.png" alt="img"></p>
<h3 id="3-tee三通定向"><a href="#3-tee三通定向" class="headerlink" title="3.tee三通定向"></a>3.tee三通定向</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;helloword&quot; | tee file</span><br><span class="line"></span><br><span class="line">跟&gt; &gt;&gt; 类似，但不能通用</span><br><span class="line"></span><br><span class="line">|tee file 覆盖</span><br><span class="line">|tee -a file 追加</span><br></pre></td></tr></table></figure>



<h2 id="十、Linux服务管理"><a href="#十、Linux服务管理" class="headerlink" title="十、Linux服务管理"></a>十、Linux服务管理</h2><h3 id="1-systemctl服务"><a href="#1-systemctl服务" class="headerlink" title="1.systemctl服务"></a>1.systemctl服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">systemctl start  vsftpd　　#启动服务</span><br><span class="line">systemctl status  vsftpd　　#查看服务状态</span><br><span class="line">systemctl status  vsftpd -l　#查看服务详细状态</span><br><span class="line">systemctl stop vsftpd　#停止服务</span><br><span class="line">systemctl restart vsftpd　　#重启服务</span><br><span class="line">systemctl reload  vsftpd　　#重新加载配置文件</span><br><span class="line">systemctl enable vsftpd　　　# 做开机启动</span><br><span class="line">systemctl disable vsftpd　　　#关闭开机启动</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">可以判断服务是否处于运行状态</span></span><br><span class="line">systemctl is-active vsftpd</span><br><span class="line">systemctl is-failed vsftpd</span><br><span class="line"></span><br><span class="line">systemctl is-enabled firewalld　　#可以判断服务是否具有开机启动</span><br></pre></td></tr></table></figure>

<h3 id="2-时间服务器"><a href="#2-时间服务器" class="headerlink" title="2.时间服务器"></a>2.时间服务器</h3><p>1.环境准备</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 修改主机名</span></span></span><br><span class="line">hostnamectl set-hostname ntp-server</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 关闭防火墙和selinux</span></span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">setenforce 0</span><br></pre></td></tr></table></figure>

<p>2.配置时间服务器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># １．修改主机名</span></span></span><br><span class="line">hostnamectl set-hostname ntp-server</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># ２．关闭防火墙和selinux</span></span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">setenforce 0</span><br></pre></td></tr></table></figure>

<p>配置;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep ntp</span><br><span class="line">ntp-4.2.4p8-3.el6.x86_64</span><br><span class="line"></span><br><span class="line">yum -y install ntp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># NTP Server配置示例：</span></span></span><br><span class="line">vim /etc/ntp.conf #配置文件全部删掉，只要下面三行</span><br><span class="line">restrict default nomodify #不允许客户端登录，也不允许客户端修改</span><br><span class="line">server 127.127.1.0 #使用本地的bios时间，自己跟自己同步</span><br><span class="line">fudge 127.127.1.0 stratum 10 #定义级别，范围0-16，越小越精准</span><br><span class="line">systemctl restart ntpd</span><br><span class="line">systemctl enable ntpd</span><br></pre></td></tr></table></figure>

<p>ntp客户端：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum -y install ntpdate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ntpdate -b 172.16.110.1(ip地址)</span><br></pre></td></tr></table></figure>



<h3 id="3-Apache编译安装"><a href="#3-Apache编译安装" class="headerlink" title="3.Apache编译安装"></a>3.Apache编译安装</h3><p><a target="_blank" rel="noopener" href="https://httpd.apache.org/download.cgi">https://httpd.apache.org/download.cgi</a></p>
<p>下载apache压缩包并解压</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://dlcdn.apache.org/httpd/httpd-2.4.54.tar.gz --no-check-certificate</span><br><span class="line"></span><br><span class="line">tar xf httpd-NN.tar.gz</span><br></pre></td></tr></table></figure>

<p>下载apr和apr-util并解压到/httpd-NN/srclib/，并分别改名为apr和apr-util</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://dlcdn.apache.org//apr/apr-1.7.0.tar.gz --no-check-certificate</span><br><span class="line">wget https://dlcdn.apache.org//apr/apr-util-1.6.1.tar.gz --no-check-certificate</span><br><span class="line"></span><br><span class="line">tar xf apr-1.7.0.tar.gz -C /httpd-NN/srclib/apr</span><br><span class="line">tar xf apr/apr-util-1.6.1.tar.gz -C /httpd-NN/srclib/apr-util</span><br></pre></td></tr></table></figure>

<p>在httpd-NN目录下执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/local/apache</span><br><span class="line">./configure --prefix=/usr/local/apache</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<p>注：编译安装必备依赖环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install apr apr-util ncurses ncurses-devel openssl-devel bison gcc gcc-c++ make expat-devel  pcre-devel expat-devel libtool</span><br></pre></td></tr></table></figure>







<h3 id="4-日志"><a href="#4-日志" class="headerlink" title="4.日志"></a>4.日志</h3><h4 id="1-常见的日志文件-系统、进程、应用程序"><a href="#1-常见的日志文件-系统、进程、应用程序" class="headerlink" title="1.常见的日志文件(系统、进程、应用程序)"></a>1.常见的日志文件(系统、进程、应用程序)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ls /var/log/</span><br><span class="line">tail /var/log/messages #系统主日志文件</span><br><span class="line">tail -f /var/log/messages #动态查看日志文件的尾部</span><br><span class="line">tail -f /var/log/secure #认证、安全</span><br><span class="line">tail /var/log/cron #crond、at进程产生的日志</span><br><span class="line">tail /var/log/yum.log #yum</span><br></pre></td></tr></table></figure>

<p>二进制日志</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">w #当前登录的用户即: /var/log/wtmp日志</span><br><span class="line">last #最近登录的用户 /var/log/btmp</span><br><span class="line">lastlog #所有用户的登录情况 /var/log/lastlog</span><br></pre></td></tr></table></figure>

<p>日志存放位置: 存放本地 /var/log<br>日志服务启动:systemctl start rsyslog<br>日志配置文件:/etc/rsyslog.conf</p>
<h4 id="2-自定义日志"><a href="#2-自定义日志" class="headerlink" title="2.自定义日志"></a>2.自定义日志</h4><p>定义sshd日志：</p>
<p>1.修改sshd服务主配置文件：<br>将/etc/ssh/sshd_config 的#SyslogFacility AUTHPRIV改为 SyslogFacility local2</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>

<p>SyslogFacility local2 //设置ssh的日志定义由local2设备来记录<br>2.在rsyslog的主配置文件里加上：local2.info     /var/log/ssh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/rsyslog.conf</span><br></pre></td></tr></table></figure>

<p>3.重启服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd	#重启sshd服务</span><br><span class="line"></span><br><span class="line">systemctl restart rsyslog	#重启日志服务</span><br></pre></td></tr></table></figure>

<p>4.远程日志服务器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/rsyslog.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 加上</span></span></span><br><span class="line">*.* @10.11.59.91                //注意@:使用udp  @@:使用tcp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 修改配置文件打开接收功能</span></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ModLoad imtcp</span>    </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">UDPServerRun 514</span></span><br></pre></td></tr></table></figure>

<p>两台服务器都重新启动日志</p>
<p>验证：</p>
<p>在发送服务器安装一个软件，产生一条日志</p>
<p>在接受服务器的messages日志文件查看（tailf实时查看）</p>
<h4 id="3-日志切割"><a href="#3-日志切割" class="headerlink" title="3.日志切割"></a>3.日志切割</h4><p>主配置文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/logrotate.conf</span><br><span class="line"></span><br><span class="line">weekly //轮转的周期，一周轮转</span><br><span class="line">rotate 4 //保留4份</span><br><span class="line">create //轮转后创建新文件</span><br><span class="line">dateext //使用日期作为后缀</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">compress //是否压缩</span></span><br></pre></td></tr></table></figure>

<p>例：</p>
<p># 对于wtmp和btmp这样无主的日志，按照下面配置进行轮转<br>/var/log/wtmp { //对该日志文件设置轮转的方法<br>monthly //一月轮转一次<br>minsize 1M //最小达到1M才轮转，即到了规定的时间未达到大小不会轮转<br>create 0664 root utmp //轮转后创建新文件，并设置权限属主和属组<br>rotate 1 //保留一份<br>}</p>
<p>/var/log/btmp {<br>missingok //丢失不提示<br>monthly //每月轮转一次<br>create 0600 root utmp //轮转后创建新文件，并设置权限<br>rotate 1 //保留一份<br>}</p>
<p>vim /etc/logrotate.d/yum //原有的设置，没有说保存几份，看上面的全局设置<br>/var/log/yum.log { //yum日志文件<br>missingok //丢失不提示<br>notifempty //如果为空，不轮转<br>size 30k //达到30k就轮转<br>yearly //达到一年就轮转一次，两者满足一个就轮转<br>create 0600 root root //创建新文件<br>}</p>
<h3 id="5-计划任务"><a href="#5-计划任务" class="headerlink" title="5.计划任务"></a>5.计划任务</h3><h4 id="1-at下载启动"><a href="#1-at下载启动" class="headerlink" title="1.at下载启动"></a>1.at下载启动</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y at</span><br><span class="line">systemctl start atd</span><br><span class="line">systemctl enable atd</span><br></pre></td></tr></table></figure>

<p>查看计划任务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">at -l</span><br><span class="line"></span><br><span class="line">cat /var/spool/at/a0000201a62434</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659927414576-7ac96287-2127-4763-b4aa-0a36cf60e17e.png" alt="img"></p>
<p>删除计划任务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">at -r 任务号</span><br><span class="line">at -d 任务号</span><br><span class="line">atrm 任务号</span><br></pre></td></tr></table></figure>

<p>创建任务：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">at 11:00 12/31/2022</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">ls</span> /</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">&lt;EOF&gt;	<span class="comment">#Ctrl + D结束</span></span></span><br></pre></td></tr></table></figure>



<h4 id="2-crontab循环计划任务"><a href="#2-crontab循环计划任务" class="headerlink" title="2.crontab循环计划任务"></a>2.crontab循环计划任务</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 保存位置，以用户名命名</span></span></span><br><span class="line">ls /var/spool/cron/</span><br><span class="line"></span><br><span class="line">crontab -l	#查看</span><br><span class="line">crontab -e	#编辑命令（vim使用，可以dd删除命令）</span><br><span class="line">crontab -r #删除整个用户的计划任务(默认root用户)</span><br><span class="line">crontab -r -u user1	#-u指定用户</span><br></pre></td></tr></table></figure>

<p>把yang用户添加cron.deny</p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659939701786-c674d688-7672-4b03-907a-9cd06643109d.png" alt="img"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659939667512-cab7773e-2733-41c0-90ac-fef05f44c715.png" alt="img"></p>
<p>切换到yang，发现crontab不能用</p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659939580297-a21a9f04-4a28-442e-a82a-fa4dfc812aab.png" alt="img"></p>
<p>把yang从cron.deny删除，crontab能用</p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659939793766-a7a156aa-699f-4656-9b29-2489e0a90cf9.png" alt="img"></p>
<h3 id="6-FTP服务"><a href="#6-FTP服务" class="headerlink" title="6.FTP服务"></a>6.FTP服务</h3><h4 id="1-基本配置"><a href="#1-基本配置" class="headerlink" title="1.基本配置"></a>1.基本配置</h4><p>vsftpd的被动模式是默认开启的，可以关闭，主动模式永远开启，不能关闭<br>主动模式： 21端口负责连接，20端口负责传输数据</p>
<p>vsftp服务器关闭被动模式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/vsftpd/vsftpd.conf</span><br><span class="line"></span><br><span class="line">pasv_enable=NO</span><br></pre></td></tr></table></figure>

<p>lftp客户端关闭被动模式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">lftp 10.36.139.62</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 临时关闭</span></span></span><br><span class="line">set ftp:passive-mode off</span><br><span class="line">exit</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 永久关闭</span></span></span><br><span class="line">vim /etc/lftp.conf</span><br><span class="line"></span><br><span class="line">set ftp:passive-mode off</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1659944181293-6874b831-43e6-4c4d-9060-6068c44e0e38.png" alt="img"></p>
<h4 id="2-FTP部署"><a href="#2-FTP部署" class="headerlink" title="2.FTP部署"></a>2.FTP部署</h4><h5 id="1-vsftpd配置匿名用户"><a href="#1-vsftpd配置匿名用户" class="headerlink" title="1.vsftpd配置匿名用户"></a>1.vsftpd配置匿名用户</h5><p>1.编辑配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim vsftpd.conf</span><br><span class="line"></span><br><span class="line">write_enable=YES</span><br><span class="line"></span><br><span class="line">anonymous_enable=YES</span><br><span class="line">anon_upload_enable=YES</span><br><span class="line">anon_mkdir_write_enable=YES</span><br><span class="line">anon_other_write_enable=YES</span><br></pre></td></tr></table></figure>

<p>2、常用的匿名FTP配置项</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">anonymous_enable=YES 		# 是否允许匿名用户访问</span><br><span class="line">anon_umask=022 	# 匿名用户所上传文件的权限掩码</span><br><span class="line">anon_root=/var/ftp # 设置匿名用户的FTP根目录</span><br><span class="line">anon_upload_enable=YES 		# 是否允许匿名用户上传文件</span><br><span class="line">anon_mkdir_write_enable=YES 			# 是否允许匿名用户允许创建目录</span><br><span class="line">anon_other_write_enable=YES 			# 是否允许匿名用户有其他写入权（改名，删除，覆盖）</span><br><span class="line">anon_max_rate=0 # 限制最大传输速率（字节/秒）0为无限制</span><br></pre></td></tr></table></figure>

<p>3、开启 vsftp 服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start vsftpd</span><br><span class="line"></span><br><span class="line">netstat -lnpt |grep vsftpd</span><br></pre></td></tr></table></figure>



<h5 id="2-vsftpd配置本地用户"><a href="#2-vsftpd配置本地用户" class="headerlink" title="2.vsftpd配置本地用户"></a>2.vsftpd配置本地用户</h5><p>1.创建用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">useradd zhangsan</span><br><span class="line">useradd lisi</span><br><span class="line"></span><br><span class="line">echo &quot;123456&quot; | passwd --stdin zhangsan</span><br><span class="line">echo &quot;123456&quot; | passwd --stdin lisi</span><br></pre></td></tr></table></figure>

<p>2.修改配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/vsftpd/vsftpd.conf</span><br><span class="line"></span><br><span class="line">local_enable=YES</span><br><span class="line">local_umask=077</span><br><span class="line">chroot_local_user=YES</span><br><span class="line">allow_writeable_chroot=YES</span><br><span class="line">write_enable=YES</span><br></pre></td></tr></table></figure>

<p>默认情况下是我们匿名账户的根目录<br>对于普通用户的根目录来讲，默认情况下ftp本地账户访问的根目录是自己的家目录<br>打开了上传和下载功能</p>
<p>3、常用的本地用户FTP配置项</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">local_enable=YES # 是否允许本地系统用户访问</span><br><span class="line">local_umask=022 # 本地用户所上传文件的权限掩码</span><br><span class="line">local_root=/var/ftp # 设置本地用户的FTP根目录</span><br><span class="line">chroot_list_enable=YES 	# 表示是否开启chroot的环境，默认没有开启</span><br><span class="line">chroot_list_file=/etc/vsftpd/chroot_list 	</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示写在/etc/vsftpd/chroot_list文件里面的用户是不可以出<span class="built_in">chroot</span>环境的。默认是可以的。</span></span><br><span class="line">Chroot_local_user=YES 	</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示所有写在/etc/vsftpd/chroot_list文件里面的用户是可以出<span class="built_in">chroot</span>环境的，和上面的相反。</span></span><br><span class="line">local_max_rate=0 # 限制最大传输速率（字节/秒）0为无限制</span><br></pre></td></tr></table></figure>



<p>4、添加用户到白名单</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/vsftpd/user_list </span><br><span class="line"></span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br></pre></td></tr></table></figure>

<p>5、重启服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart vsftpd </span><br></pre></td></tr></table></figure>

<h3 id="7-NFS部署"><a href="#7-NFS部署" class="headerlink" title="7.NFS部署"></a>7.NFS部署</h3><p>1.关闭防火墙和selinux</p>
<p>2.安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install nfs-utils</span><br><span class="line">systemctl start nfs</span><br><span class="line">systemctl enable nfs-server</span><br></pre></td></tr></table></figure>

<p>3.以只读方式共享</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/nfs-share</span><br><span class="line"></span><br><span class="line">vim /etc/exports</span><br><span class="line">/share/dir1 *(ro,sync)</span><br><span class="line"></span><br><span class="line">exportfs -rv #重新刷新共享,类似重启服务</span><br><span class="line">/share/dir2 172.16.60.0/24(rw,sync,no_root_squash)</span><br><span class="line">sync：sync传输过程中将数据直接写入内存和硬盘</span><br><span class="line">no_root_squash:</span><br><span class="line">root_squash：当登录NFS主机使用共享目录的使用者是root时，其权限将被转换成为匿名使用者，通常它的UID与GID都会变成nobody身份。</span><br></pre></td></tr></table></figure>

<p>4.客户端</p>
<p>安装nfs-utils</p>
<p>查看存储端共享</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showmount -e 10.36.139.106</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1660027400032-0e4dd66f-eb04-4524-ab4f-81bf08da1711.png" alt="img"></p>
<p>挂载NFS</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt/nfs</span><br><span class="line"></span><br><span class="line">vim /etc/fstab</span><br><span class="line"></span><br><span class="line">10.36.139.106:/opt/nfs-share /mnt/nfs nfs defaults,_netdev 0 0</span><br><span class="line"></span><br><span class="line">mount -a</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/22448869/1660027546205-0ec0929c-ede9-43eb-8d1b-034468a53db1.png" alt="img"></p>
<h3 id="8-DNS域名系统"><a href="#8-DNS域名系统" class="headerlink" title="8.DNS域名系统"></a>8.DNS域名系统</h3><p>“.com”是顶级域名； .like .vip .top .cn .我爱你 .edu .中国<br>“aliyun.com”是主域名（也可称托管一级域名），主要指企业名<br>“example.aliyun.com”是子域名（也可称为托管二级域名）<br>“<a target="_blank" rel="noopener" href="http://www.example.aliyun.com”是子域名的子域(也可称为托管三级域名)/">www.example.aliyun.com”是子域名的子域（也可称为托管三级域名）</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/09/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ShowerSheep">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/09/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-08-09 19:58:41 / 修改时间：19:58:06" itemprop="dateCreated datePublished" datetime="2022-08-09T19:58:41+08:00">2022-08-09</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ShowerSheep</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
